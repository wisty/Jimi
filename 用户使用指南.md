# Jimi ç”¨æˆ·ä½¿ç”¨æŒ‡å—

> å…¨é¢çš„ç”¨æˆ·ä½¿ç”¨æ‰‹å†Œ - ä»å®‰è£…åˆ°ç²¾é€š

[![Java](https://img.shields.io/badge/Java-17+-orange.svg)](https://www.oracle.com/java/)
[![Spring Boot](https://img.shields.io/badge/Spring%20Boot-3.2.5-brightgreen.svg)](https://spring.io/projects/spring-boot)
[![License](https://img.shields.io/badge/License-Apache%202.0-blue.svg)](LICENSE)

---

## ğŸ“‹ ç›®å½•

- [ç¬¬ä¸€ç« ï¼šé¡¹ç›®æ¦‚è¿°](#ç¬¬ä¸€ç« é¡¹ç›®æ¦‚è¿°)
- [ç¬¬äºŒç« ï¼šå¿«é€Ÿå…¥é—¨](#ç¬¬äºŒç« å¿«é€Ÿå…¥é—¨)
- [ç¬¬ä¸‰ç« ï¼šå®‰è£…é…ç½®](#ç¬¬ä¸‰ç« å®‰è£…é…ç½®)
- [ç¬¬å››ç« ï¼šåŸºç¡€ä½¿ç”¨](#ç¬¬å››ç« åŸºç¡€ä½¿ç”¨)
- [ç¬¬äº”ç« ï¼šæ ¸å¿ƒåŠŸèƒ½](#ç¬¬äº”ç« æ ¸å¿ƒåŠŸèƒ½)
- [ç¬¬å…­ç« ï¼šé«˜çº§ç‰¹æ€§](#ç¬¬å…­ç« é«˜çº§ç‰¹æ€§)
- [ç¬¬ä¸ƒç« ï¼šæ‰©å±•å¼€å‘](#ç¬¬ä¸ƒç« æ‰©å±•å¼€å‘)
- [ç¬¬å…«ç« ï¼šæ•…éšœæ’é™¤](#ç¬¬å…«ç« æ•…éšœæ’é™¤)
- [é™„å½•](#é™„å½•)

---

## ç¬¬ä¸€ç« ï¼šé¡¹ç›®æ¦‚è¿°

### 1.1 ä»€ä¹ˆæ˜¯ Jimi

Jimi æ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„ AI é©±åŠ¨çš„å‘½ä»¤è¡Œæ™ºèƒ½ä»£ç†ç³»ç»Ÿï¼Œä¸“ä¸ºè½¯ä»¶å¼€å‘åœºæ™¯è®¾è®¡ã€‚å®ƒå°†å¤§è¯­è¨€æ¨¡å‹
ï¼ˆLLMï¼‰çš„æ™ºèƒ½èƒ½åŠ›ä¸ä¸°å¯Œçš„å¼€å‘å·¥å…·ç”Ÿæ€ç³»ç»Ÿå®Œç¾ç»“åˆï¼Œä¸ºè½¯ä»¶å¼€å‘è€…æä¾›æ™ºèƒ½åŒ–çš„å¼€å‘åŠ©æ‰‹ä½“éªŒã€‚

### 1.2 æ ¸å¿ƒä»·å€¼

- **ğŸš€ æå‡å¼€å‘æ•ˆç‡**ï¼šé€šè¿‡ AI è‡ªåŠ¨åŒ–å®Œæˆé‡å¤æ€§å·¥ä½œï¼Œè®©å¼€å‘è€…ä¸“æ³¨äºåˆ›é€ æ€§ä»»åŠ¡
- **ğŸ§  æ™ºèƒ½å†³ç­–æ”¯æŒ**ï¼šæä¾›å³æ—¶çš„æŠ€æœ¯å’¨è¯¢ã€ä»£ç å»ºè®®å’Œæœ€ä½³å®è·µæŒ‡å¯¼
- **ğŸ”§ å·¥å…·é›†æˆå¹³å°**ï¼šç»Ÿä¸€çš„å·¥å…·è°ƒç”¨æ¥å£ï¼Œæ”¯æŒæ–‡ä»¶æ“ä½œã€Shell å‘½ä»¤ã€ç½‘ç»œè®¿é—®ç­‰
- **ğŸ¯ ä¸“ä¸šåŒ–åˆ†å·¥**ï¼šå¤š Agent åä½œæœºåˆ¶ï¼Œä¸åŒ Agent ä¸“æ³¨ä¸åŒé¢†åŸŸï¼ˆè®¾è®¡ã€ç¼–ç ã€å®¡æŸ¥ç­‰ï¼‰
- **ğŸ“š çŸ¥è¯†æ³¨å…¥ç³»ç»Ÿ**ï¼šSkills åŠŸèƒ½æ”¯æŒé¢†åŸŸçŸ¥è¯†çš„æ¨¡å—åŒ–æ³¨å…¥å’Œè‡ªåŠ¨æ¿€æ´»

### 1.3 é€‚ç”¨åœºæ™¯

Jimi å¯ä»¥å¸®åŠ©ä½ å®Œæˆä»¥ä¸‹ä»»åŠ¡ï¼š

- **ä»£ç å¼€å‘**ï¼šä»£ç ç”Ÿæˆã€é‡æ„ã€ä¼˜åŒ–
- **é—®é¢˜è¯Šæ–­**ï¼šæŠ€æœ¯é—®é¢˜è¯Šæ–­ä¸è§£å†³æ–¹æ¡ˆå»ºè®®
- **ä»£ç å®¡æŸ¥**ï¼šä»£ç è´¨é‡åˆ†æã€å®‰å…¨å®¡è®¡ã€æœ€ä½³å®è·µæ£€æŸ¥
- **è‡ªåŠ¨åŒ–ä»»åŠ¡**ï¼šæ‰¹é‡æ–‡ä»¶æ“ä½œã€è„šæœ¬æ‰§è¡Œ
- **æ¶æ„è®¾è®¡**ï¼šé¡¹ç›®æ¶æ„è®¾è®¡ä¸å’¨è¯¢
- **æ–‡æ¡£ç”Ÿæˆ**ï¼šæŠ€æœ¯æ–‡æ¡£ç¼–å†™ä¸ç»´æŠ¤
- **æµ‹è¯•å¼€å‘**ï¼šæµ‹è¯•ç”¨ä¾‹ç”Ÿæˆã€æµ‹è¯•æ‰§è¡Œä¸åˆ†æ
- **é¡¹ç›®æ„å»º**ï¼šç¼–è¯‘ã€ä¾èµ–ç®¡ç†ã€é”™è¯¯ä¿®å¤

### 1.4 ç³»ç»Ÿç‰¹æ€§

#### ğŸ¤– CLI æ™ºèƒ½ä»£ç†
- è‡ªç„¶è¯­è¨€äº¤äº’ç•Œé¢
- äº¤äº’å¼ Shell ç¯å¢ƒï¼ˆåŸºäº JLineï¼‰
- ä¸°å¯Œçš„å…ƒå‘½ä»¤æ”¯æŒ
- å½©è‰²è¾“å‡ºä¸ä¸­æ–‡å‹å¥½çš„è‡ªåŠ¨æ¢è¡Œ

#### ğŸ­ å¤š Agent æ”¯æŒ
- **é»˜è®¤ Agent**ï¼šé€šç”¨å¼€å‘åŠ©æ‰‹
- **è®¾è®¡ Agent**ï¼šéœ€æ±‚åˆ†æã€æ¶æ„è®¾è®¡ã€æŠ€æœ¯é€‰å‹
- **ç¼–ç  Agent**ï¼šä»£ç å®ç°ã€é‡æ„ã€ä¼˜åŒ–
- **å®¡æŸ¥ Agent**ï¼šä»£ç è´¨é‡å®¡æŸ¥ã€å®‰å…¨å®¡è®¡
- **æ„å»º Agent**ï¼šé¡¹ç›®æ„å»ºã€ä¾èµ–ç®¡ç†
- **æµ‹è¯• Agent**ï¼šæµ‹è¯•è¿è¡Œä¸åˆ†æ
- **è°ƒè¯• Agent**ï¼šé”™è¯¯è¯Šæ–­ä¸ä¿®å¤
- **æ–‡æ¡£ Agent**ï¼šæ–‡æ¡£ç¼–å†™ä¸ç»´æŠ¤
- **ç ”ç©¶ Agent**ï¼šæŠ€æœ¯ä¿¡æ¯æœç´¢ä¸ç ”ç©¶
- **è‡ªå®šä¹‰ Agent**ï¼šæ”¯æŒ YAML é…ç½®è‡ªå®šä¹‰ Agent

#### ğŸ§© Skills ç³»ç»Ÿ
- é¢†åŸŸçŸ¥è¯†æ¨¡å—åŒ–ç®¡ç†
- å…³é”®è¯è‡ªåŠ¨åŒ¹é…æ¿€æ´»
- å›¢é˜ŸçŸ¥è¯†å…±äº«ä¸å¤ç”¨
- é«˜æ€§èƒ½ç¼“å­˜æœºåˆ¶ï¼ˆCaffeineï¼‰

#### ğŸ”Œ LLM é›†æˆ
- æ”¯æŒå¤šç§ LLM æä¾›å•†ï¼ˆOpenAIã€Kimiã€Qwenã€DeepSeekã€Ollamaã€Claudeï¼‰
- çµæ´»çš„æ¨¡å‹åˆ‡æ¢
- æµå¼å“åº”å¤„ç†
- ä¸Šä¸‹æ–‡æ™ºèƒ½å‹ç¼©

#### ğŸŒ MCP åè®®æ”¯æŒ
- Model Context Protocol æ ‡å‡†é›†æˆ
- HTTP å’Œ StdIO ä¸¤ç§é€šä¿¡æ–¹å¼
- å¤–éƒ¨å·¥å…·æœåŠ¡é›†æˆ
- ç¤ºä¾‹é…ç½®ï¼ˆæ•°æ®åº“ã€æ–‡ä»¶ç³»ç»Ÿã€Gitã€GitHub ç­‰ï¼‰

#### ğŸ› ï¸ ä¸°å¯Œçš„å·¥å…·ç³»ç»Ÿ
- **æ–‡ä»¶æ“ä½œ**ï¼šè¯»å–ã€å†™å…¥ã€æœç´¢ã€è¡¥ä¸åº”ç”¨
- **Shell æ‰§è¡Œ**ï¼šå‘½ä»¤æ‰§è¡Œä¸ç»“æœæ•è·
- **ç½‘ç»œå·¥å…·**ï¼šç½‘é¡µå†…å®¹æŠ“å–ã€HTTP è¯·æ±‚
- **å¾…åŠäº‹é¡¹**ï¼šä»»åŠ¡ç®¡ç†ä¸è¿½è¸ª
- **æ€è€ƒå·¥å…·**ï¼šå¤æ‚æ¨ç†ä¸è®¡åˆ’
- **å­ Agent ä»»åŠ¡å§”æ‰˜**ï¼šå¤æ‚ä»»åŠ¡åˆ†è§£ä¸å¹¶è¡Œå¤„ç†
- **MCP å·¥å…·**ï¼šåŠ¨æ€åŠ è½½å¤–éƒ¨å·¥å…·

#### ğŸ” é«˜çº§åŠŸèƒ½
- **ä¸Šä¸‹æ–‡å‹ç¼©**ï¼šæ™ºèƒ½æ¶ˆæ¯å‹ç¼©ï¼ŒèŠ‚çœ Token
- **å®¡æ‰¹æœºåˆ¶**ï¼šæ•æ„Ÿæ“ä½œçš„äººå·¥å®¡æ‰¹æ§åˆ¶
- **YOLO æ¨¡å¼**ï¼šè‡ªåŠ¨æ‰¹å‡†æ‰€æœ‰æ“ä½œï¼Œæå‡æ•ˆç‡
- **å¾ªç¯æ§åˆ¶**ï¼šæœ€å¤§æ­¥æ•°ä¸è¿è¡Œæ—¶é—´é™åˆ¶
- **ä¼šè¯ç®¡ç†**ï¼šä¼šè¯æŒä¹…åŒ–ä¸æ¢å¤

### 1.5 æŠ€æœ¯æ¶æ„

Jimi é‡‡ç”¨åˆ†å±‚æ¶æ„è®¾è®¡ï¼Œä¸»è¦åŒ…å«ä»¥ä¸‹æ ¸å¿ƒå±‚æ¬¡ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        ç”¨æˆ·äº¤äº’å±‚                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ CLIå‘½ä»¤è¡Œ â”‚ â”€â”€â–¶ â”‚JLine Shellâ”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        æ ¸å¿ƒå¼•æ“å±‚                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚JimiEngineâ”‚  â”‚  Agent   â”‚        â”‚
â”‚  â”‚          â”‚  â”‚ Executor â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚  Runtime â”‚  â”‚ Context  â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       AI æœåŠ¡å±‚                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚   LLM    â”‚  â”‚ Provider â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       å·¥å…·ç³»ç»Ÿå±‚                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚Tool      â”‚  â”‚   MCP    â”‚        â”‚
â”‚  â”‚Registry  â”‚  â”‚ Protocol â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.6 æŠ€æœ¯æ ˆ

#### æ ¸å¿ƒæ¡†æ¶
- **Java 17**ï¼šç°ä»£ Java ç‰¹æ€§æ”¯æŒ
- **Spring Boot 3.2.5**ï¼šä¼ä¸šçº§åº”ç”¨æ¡†æ¶
- **WebFlux**ï¼šå“åº”å¼ç¼–ç¨‹æ”¯æŒ

#### å‘½ä»¤è¡Œä¸äº¤äº’
- **Picocli 4.7.6**ï¼šå‘½ä»¤è¡Œå‚æ•°è§£æ
- **JLine 3.25.1**ï¼šç»ˆç«¯äº¤äº’ä¸ Shell å®ç°

#### æ•°æ®å¤„ç†
- **Jackson 2.16.2**ï¼šJSON åºåˆ—åŒ–/ååºåˆ—åŒ–
- **SnakeYAML 2.2**ï¼šYAML é…ç½®è§£æ

#### å·¥å…·ä¸åº“
- **Apache Commons Exec**ï¼šè¿›ç¨‹æ‰§è¡Œ
- **Apache Commons Text**ï¼šæ–‡æœ¬å¤„ç†
- **Jsoup 1.17.2**ï¼šHTML è§£æ
- **Java Diff Utils 4.12**ï¼šè¡¥ä¸æ“ä½œ
- **Caffeine 3.1.8**ï¼šé«˜æ€§èƒ½ç¼“å­˜

#### å¼€å‘å·¥å…·
- **Lombok 1.18.32**ï¼šä»£ç ç®€åŒ–
- **SLF4J + Logback**ï¼šæ—¥å¿—ç®¡ç†
- **JUnit 5 + Mockito**ï¼šæµ‹è¯•æ¡†æ¶

#### åè®®é›†æˆ
- **MCP SDK 0.12.1**ï¼šModel Context Protocol æ”¯æŒ

---

## ç¬¬äºŒç« ï¼šå¿«é€Ÿå…¥é—¨

### 2.1 5 åˆ†é’Ÿå¿«é€Ÿä½“éªŒ

å¦‚æœä½ åªæœ‰ 5 åˆ†é’Ÿæ—¶é—´æƒ³å¿«é€Ÿä½“éªŒ Jimiï¼ŒæŒ‰ä»¥ä¸‹æ­¥éª¤æ“ä½œï¼š

#### æ­¥éª¤ 1ï¼šå…‹éš†é¡¹ç›®
```bash
git clone https://github.com/your-repository/Jimi.git
cd Jimi
```

#### æ­¥éª¤ 2ï¼šä¸€é”®å®‰è£…
```bash
./scripts/quick-install.sh
```

è¯¥è„šæœ¬ä¼šè‡ªåŠ¨å®Œæˆï¼š
1. âœ… ç¯å¢ƒæ£€æŸ¥
2. âœ… ä¾èµ–å®‰è£…ï¼ˆå¦‚éœ€è¦ï¼‰
3. âœ… é¡¹ç›®æ„å»º
4. âœ… é…ç½®åˆå§‹åŒ–
5. âœ… å¯åŠ¨æœåŠ¡

#### æ­¥éª¤ 3ï¼šå¼€å§‹å¯¹è¯
å®‰è£…å®Œæˆåï¼ŒJimi ä¼šè‡ªåŠ¨å¯åŠ¨ï¼Œä½ å¯ä»¥ç›´æ¥å¼€å§‹å¯¹è¯ï¼š

```
ä½ å¥½ï¼Œè¯·å¸®æˆ‘åˆ†æä¸€ä¸‹è¿™ä¸ªé¡¹ç›®çš„ç»“æ„
```

### 2.2 ç¬¬ä¸€æ¬¡ä½¿ç”¨

#### æŸ¥çœ‹å¸®åŠ©
```
/help
```

è¿™ä¼šæ˜¾ç¤ºæ‰€æœ‰å¯ç”¨çš„å‘½ä»¤å’Œä½¿ç”¨è¯´æ˜ã€‚

#### æŸ¥çœ‹ç³»ç»ŸçŠ¶æ€
```
/status
```

æŸ¥çœ‹å½“å‰ Agentã€å¯ç”¨å·¥å…·æ•°é‡ã€ä¸Šä¸‹æ–‡ä¿¡æ¯ç­‰ã€‚

#### æŸ¥çœ‹å¯ç”¨å·¥å…·
```
/tools
```

æŸ¥çœ‹ Jimi æä¾›çš„æ‰€æœ‰å·¥å…·ï¼ŒåŒ…æ‹¬æ–‡ä»¶æ“ä½œã€Shell æ‰§è¡Œã€ç½‘ç»œå·¥å…·ç­‰ã€‚

### 2.3 åŸºç¡€å¯¹è¯ç¤ºä¾‹

#### ç¤ºä¾‹ 1ï¼šè¯¢é—®æŠ€æœ¯é—®é¢˜
```
ä»€ä¹ˆæ˜¯ Spring Bootï¼Ÿå®ƒæœ‰å“ªäº›æ ¸å¿ƒç‰¹æ€§ï¼Ÿ
```

#### ç¤ºä¾‹ 2ï¼šä»£ç åˆ†æ
```
è¯·åˆ†æ src/main/java/io/leavesfly/jimi/JimiEngine.java 
è¿™ä¸ªæ–‡ä»¶çš„è®¾è®¡æ¨¡å¼å’Œæ¶æ„
```

#### ç¤ºä¾‹ 3ï¼šæ–‡ä»¶æ“ä½œ
```
è¯·å¸®æˆ‘è¯»å– README.md æ–‡ä»¶çš„å†…å®¹
```

#### ç¤ºä¾‹ 4ï¼šä»£ç ç”Ÿæˆ
```
è¯·å¸®æˆ‘ç”Ÿæˆä¸€ä¸ª Spring Boot çš„ REST Controllerï¼Œ
åŒ…å« CRUD æ“ä½œ
```

### 2.4 ä½¿ç”¨ä¸åŒçš„ Agent

#### ä½¿ç”¨è®¾è®¡ Agent
```
è¯·ä½¿ç”¨è®¾è®¡ Agent å¸®æˆ‘è®¾è®¡ä¸€ä¸ªç”µå•†ç³»ç»Ÿçš„è®¢å•æ¨¡å—æ¶æ„
```

#### ä½¿ç”¨ç¼–ç  Agent
```
è¯·ä½¿ç”¨ç¼–ç  Agent å¸®æˆ‘å®ç°ç”¨æˆ·æ³¨å†ŒåŠŸèƒ½
```

#### ä½¿ç”¨å®¡æŸ¥ Agent
```
è¯·ä½¿ç”¨å®¡æŸ¥ Agent å®¡æŸ¥ UserService.java çš„ä»£ç è´¨é‡
```

### 2.5 å¸¸è§å…ƒå‘½ä»¤

```
/help       # æ˜¾ç¤ºå¸®åŠ©
/status     # æŸ¥çœ‹çŠ¶æ€
/config     # æŸ¥çœ‹é…ç½®
/tools      # æŸ¥çœ‹å·¥å…·åˆ—è¡¨
/history    # æŸ¥çœ‹å‘½ä»¤å†å²
/reset      # æ¸…é™¤ä¸Šä¸‹æ–‡
/clear      # æ¸…å±
/quit       # é€€å‡º
```

---

## ç¬¬ä¸‰ç« ï¼šå®‰è£…é…ç½®

### 3.1 ç¯å¢ƒè¦æ±‚

#### ç³»ç»Ÿè¦æ±‚
- **æ“ä½œç³»ç»Ÿ**ï¼šmacOSã€Linux æˆ– Windows
- **Java**ï¼š17 æˆ–æ›´é«˜ç‰ˆæœ¬
- **Maven**ï¼š3.6 æˆ–æ›´é«˜ç‰ˆæœ¬
- **ç£ç›˜ç©ºé—´**ï¼šè‡³å°‘ 500MB
- **å†…å­˜**ï¼šå»ºè®® 2GB ä»¥ä¸Š

#### å¯é€‰ä¾èµ–
- **Git**ï¼šç”¨äºå…‹éš†é¡¹ç›®
- **curl/wget**ï¼šç”¨äºä¸‹è½½èµ„æº

### 3.2 å®‰è£…æ–¹å¼

Jimi æä¾›ä¸¤ç§å®‰è£…æ–¹å¼ï¼š

#### æ–¹å¼ä¸€ï¼šä¸€é”®å®‰è£…ï¼ˆæ¨èï¼‰

ä¸€é”®å®‰è£…è„šæœ¬ä¼šè‡ªåŠ¨å®Œæˆæ‰€æœ‰å®‰è£…æ­¥éª¤ï¼š

```bash
cd /path/to/Jimi
./scripts/quick-install.sh
```

å®‰è£…è¿‡ç¨‹åŒ…æ‹¬ï¼š
1. ç¯å¢ƒæ£€æŸ¥
2. ä¾èµ–å®‰è£…ï¼ˆå¦‚éœ€è¦ï¼‰
3. é¡¹ç›®æ„å»º
4. é…ç½®åˆå§‹åŒ–
5. å¯åŠ¨æœåŠ¡

#### æ–¹å¼äºŒï¼šåˆ†æ­¥å®‰è£…

å¦‚æœä½ æƒ³æ›´ç²¾ç»†åœ°æ§åˆ¶å®‰è£…è¿‡ç¨‹ï¼š

**æ­¥éª¤ 1ï¼šæ£€æŸ¥ç¯å¢ƒ**
```bash
./scripts/check-env.sh
```

è¿™ä¼šæ£€æŸ¥ï¼š
- æ“ä½œç³»ç»Ÿç±»å‹
- Java ç‰ˆæœ¬ï¼ˆéœ€è¦ Java 17+ï¼‰
- Maven ç‰ˆæœ¬
- Git å·¥å…·
- ç£ç›˜ç©ºé—´å’Œå†…å­˜
- ç½‘ç»œè¿æ¥

**æ­¥éª¤ 2ï¼šå®‰è£…ä¾èµ–ï¼ˆå¦‚éœ€è¦ï¼‰**
```bash
./scripts/install-deps.sh
```

æ”¯æŒçš„ç³»ç»Ÿï¼š
- macOS (ä½¿ç”¨ Homebrew)
- Ubuntu/Debian (ä½¿ç”¨ APT)
- CentOS/RHEL (ä½¿ç”¨ YUM/DNF)

**æ­¥éª¤ 3ï¼šæ„å»ºé¡¹ç›®**
```bash
# è·³è¿‡æµ‹è¯•å¿«é€Ÿæ„å»º
./scripts/build.sh --skip-tests

# å®Œæ•´æ„å»ºï¼ˆåŒ…å«æµ‹è¯•ï¼‰
./scripts/build.sh
```

**æ­¥éª¤ 4ï¼šåˆå§‹åŒ–é…ç½®**
```bash
./scripts/init-config.sh
```

é…ç½®å‘å¯¼ä¼šå¼•å¯¼ä½ å®Œæˆï¼š
- LLM æœåŠ¡æä¾›å•†é€‰æ‹©
- API Key é…ç½®
- æ¨¡å‹é€‰æ‹©
- é«˜çº§å‚æ•°è®¾ç½®

**æ­¥éª¤ 5ï¼šå¯åŠ¨ Jimi**
```bash
./scripts/start.sh
```

### 3.3 é…ç½®è¯¦è§£

#### é…ç½®æ–‡ä»¶ä½ç½®

Jimi çš„é…ç½®æ–‡ä»¶ä½äºï¼š`~/.jimi/config.json`

#### é…ç½®æ–‡ä»¶ç»“æ„

```json
{
  "default_model": "qwen-max",
  "providers": {
    "qwen": {
      "type": "qwen",
      "base_url": "https://dashscope.aliyuncs.com/compatible-mode/v1",
      "api_key": "your-api-key-here",
      "custom_headers": {}
    }
  },
  "models": {
    "qwen-max": {
      "provider": "qwen",
      "model": "qwen-max",
      "max_context_size": 200000
    }
  },
  "loop_control": {
    "max_steps_per_run": 30,
    "max_retries_per_step": 10
  }
}
```

#### é…ç½®é¡¹è¯´æ˜

**default_model**
- ç±»å‹ï¼šå­—ç¬¦ä¸²
- è¯´æ˜ï¼šé»˜è®¤ä½¿ç”¨çš„æ¨¡å‹åç§°
- ç¤ºä¾‹ï¼š`"qwen-max"`

**providers**
- ç±»å‹ï¼šå¯¹è±¡
- è¯´æ˜ï¼šLLM æä¾›å•†é…ç½®
- æ”¯æŒçš„æä¾›å•†ï¼š
  - `kimi`ï¼šMoonshot AI
  - `qwen`ï¼šé˜¿é‡Œäº‘é€šä¹‰åƒé—®
  - `deepseek`ï¼šDeepSeek
  - `ollama`ï¼šæœ¬åœ° Ollama
  - `openai`ï¼šOpenAI
  - `claude`ï¼šAnthropic Claude

**models**
- ç±»å‹ï¼šå¯¹è±¡
- è¯´æ˜ï¼šæ¨¡å‹é…ç½®
- å­—æ®µï¼š
  - `provider`ï¼šæä¾›å•†åç§°
  - `model`ï¼šæ¨¡å‹åç§°
  - `max_context_size`ï¼šæœ€å¤§ä¸Šä¸‹æ–‡å¤§å°

**loop_control**
- ç±»å‹ï¼šå¯¹è±¡
- è¯´æ˜ï¼šå¾ªç¯æ§åˆ¶é…ç½®
- å­—æ®µï¼š
  - `max_steps_per_run`ï¼šæ¯æ¬¡è¿è¡Œçš„æœ€å¤§æ­¥æ•°
  - `max_retries_per_step`ï¼šæ¯æ­¥çš„æœ€å¤§é‡è¯•æ¬¡æ•°

### 3.4 é…ç½®ä¸åŒçš„ LLM æä¾›å•†

#### é…ç½® Moonshot AI (Kimi)

```json
{
  "default_model": "moonshot-v1-8k",
  "providers": {
    "kimi": {
      "type": "kimi",
      "base_url": "https://api.moonshot.cn/v1",
      "api_key": "your-kimi-api-key"
    }
  },
  "models": {
    "moonshot-v1-8k": {
      "provider": "kimi",
      "model": "moonshot-v1-8k",
      "max_context_size": 8000
    }
  }
}
```

#### é…ç½®é˜¿é‡Œäº‘é€šä¹‰åƒé—®

```json
{
  "default_model": "qwen-max",
  "providers": {
    "qwen": {
      "type": "qwen",
      "base_url": "https://dashscope.aliyuncs.com/compatible-mode/v1",
      "api_key": "your-qwen-api-key"
    }
  },
  "models": {
    "qwen-max": {
      "provider": "qwen",
      "model": "qwen-max",
      "max_context_size": 200000
    }
  }
}
```

#### é…ç½® DeepSeek

```json
{
  "default_model": "deepseek-v3.2",
  "providers": {
    "deepseek": {
      "type": "deepseek",
      "base_url": "https://api.deepseek.com/v1",
      "api_key": "your-deepseek-api-key"
    }
  },
  "models": {
    "deepseek-v3.2": {
      "provider": "deepseek",
      "model": "deepseek-v3.2-exp",
      "max_context_size": 200000
    }
  }
}
```

#### é…ç½®æœ¬åœ° Ollama

```json
{
  "default_model": "qwen3-local",
  "providers": {
    "ollama": {
      "type": "ollama",
      "base_url": "http://localhost:11434/v1",
      "api_key": ""
    }
  },
  "models": {
    "qwen3-local": {
      "provider": "ollama",
      "model": "qwen3:4b-instruct-2507-q8_0",
      "max_context_size": 8000
    }
  }
}
```

#### é…ç½® OpenAI

```json
{
  "default_model": "gpt-4",
  "providers": {
    "openai": {
      "type": "openai",
      "base_url": "https://api.openai.com/v1",
      "api_key": "your-openai-api-key"
    }
  },
  "models": {
    "gpt-4": {
      "provider": "openai",
      "model": "gpt-4",
      "max_context_size": 8192
    }
  }
}
```

#### é…ç½® Anthropic Claude

```json
{
  "default_model": "claude-3-5-sonnet",
  "providers": {
    "claude": {
      "type": "claude",
      "base_url": "https://api.anthropic.com/v1",
      "api_key": "your-claude-api-key",
      "custom_headers": {
        "anthropic-version": "2023-06-01"
      }
    }
  },
  "models": {
    "claude-3-5-sonnet": {
      "provider": "claude",
      "model": "claude-3-5-sonnet-20241022",
      "max_context_size": 200000
    }
  }
}
```

### 3.5 é«˜çº§é…ç½®

#### é…ç½®å¤šä¸ªæä¾›å•†

ä½ å¯ä»¥åŒæ—¶é…ç½®å¤šä¸ªæä¾›å•†ï¼Œå¹¶æ ¹æ®éœ€è¦åˆ‡æ¢ï¼š

```json
{
  "default_model": "qwen-max",
  "providers": {
    "qwen": {
      "type": "qwen",
      "base_url": "https://dashscope.aliyuncs.com/compatible-mode/v1",
      "api_key": "your-qwen-api-key"
    },
    "kimi": {
      "type": "kimi",
      "base_url": "https://api.moonshot.cn/v1",
      "api_key": "your-kimi-api-key"
    },
    "ollama": {
      "type": "ollama",
      "base_url": "http://localhost:11434/v1",
      "api_key": ""
    }
  },
  "models": {
    "qwen-max": {
      "provider": "qwen",
      "model": "qwen-max",
      "max_context_size": 200000
    },
    "moonshot-v1-8k": {
      "provider": "kimi",
      "model": "moonshot-v1-8k",
      "max_context_size": 8000
    },
    "qwen3-local": {
      "provider": "ollama",
      "model": "qwen3:4b-instruct-2507-q8_0",
      "max_context_size": 8000
    }
  }
}
```

#### é…ç½®å¾ªç¯æ§åˆ¶

å¾ªç¯æ§åˆ¶ç”¨äºé™åˆ¶ AI çš„æ¨ç†æ­¥æ•°å’Œè¿è¡Œæ—¶é—´ï¼š

```json
{
  "loop_control": {
    "max_steps_per_run": 50,
    "max_retries_per_step": 10
  }
}
```

- `max_steps_per_run`ï¼šæ¯æ¬¡è¿è¡Œçš„æœ€å¤§æ¨ç†æ­¥æ•°
- `max_retries_per_step`ï¼šæ¯æ­¥å·¥å…·è°ƒç”¨å¤±è´¥æ—¶çš„æœ€å¤§é‡è¯•æ¬¡æ•°

### 3.6 ç¯å¢ƒå˜é‡é…ç½®

é™¤äº†é…ç½®æ–‡ä»¶ï¼ŒJimi è¿˜æ”¯æŒé€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
# LLM API Key
export KIMI_API_KEY="your-api-key"
export QWEN_API_KEY="your-api-key"
export DEEPSEEK_API_KEY="your-api-key"
export OPENAI_API_KEY="your-api-key"

# å·¥ä½œç›®å½•
export JIMI_WORK_DIR="/path/to/project"

# YOLO æ¨¡å¼
export JIMI_YOLO_MODE=true
```

---

## ç¬¬å››ç« ï¼šåŸºç¡€ä½¿ç”¨

### 4.1 å¯åŠ¨ä¸é€€å‡º

#### å¯åŠ¨ Jimi

```bash
# åŸºæœ¬å¯åŠ¨
./scripts/start.sh

# æŒ‡å®šå·¥ä½œç›®å½•
./scripts/start.sh --work-dir /path/to/project

# ä½¿ç”¨ YOLO æ¨¡å¼ï¼ˆè‡ªåŠ¨æ‰¹å‡†æ‰€æœ‰æ“ä½œï¼‰
./scripts/start.sh --yolo

# æŒ‡å®š Agent
./scripts/start.sh --agent design

# è®¾ç½®å†…å­˜
./scripts/start.sh -Xmx2g
```

#### é€€å‡º Jimi

```
/quit
# æˆ–
/exit
# æˆ–
exit
# æˆ–
quit
```

### 4.2 å‘½ä»¤è¡Œç•Œé¢

Jimi æä¾›äº†å‹å¥½çš„å‘½ä»¤è¡Œç•Œé¢ï¼Œæ”¯æŒï¼š

#### å‘½ä»¤æç¤ºç¬¦
```
jimi>
```

#### å½©è‰²è¾“å‡º
- ç»¿è‰² âœ“ï¼šæˆåŠŸä¿¡æ¯
- è“è‰² â†’ï¼šæç¤ºä¿¡æ¯
- é»„è‰² âš ï¼šè­¦å‘Šä¿¡æ¯
- çº¢è‰² âœ—ï¼šé”™è¯¯ä¿¡æ¯

#### è‡ªåŠ¨æ¢è¡Œ
- æ”¯æŒä¸­æ–‡å­—ç¬¦æ­£ç¡®æ¢è¡Œ
- æ ¹æ®ç»ˆç«¯å®½åº¦è‡ªåŠ¨è°ƒæ•´
- ä¼˜å…ˆåœ¨æ ‡ç‚¹ç¬¦å·å¤„æ–­è¡Œ

#### å‘½ä»¤å†å²
- ä½¿ç”¨ â†‘â†“ é”®æµè§ˆå†å²å‘½ä»¤
- ä½¿ç”¨ `/history` æŸ¥çœ‹å®Œæ•´å†å²

#### Tab è¡¥å…¨
- è¾“å…¥ `/` åæŒ‰ Tab é”®å¯ä»¥è¡¥å…¨å‘½ä»¤

### 4.3 åŸºæœ¬å‘½ä»¤

#### å¸®åŠ©å‘½ä»¤

```
/help        # æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯
/h           # help çš„åˆ«å
/?           # help çš„åˆ«å
```

è¾“å‡ºç¤ºä¾‹ï¼š
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          Jimi CLI Help                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

âœ“ åŸºæœ¬å‘½ä»¤:
  exit, quit      - é€€å‡º Jimi
  ! <command>     - ç›´æ¥è¿è¡Œ Shell å‘½ä»¤

âœ“ å…ƒå‘½ä»¤ (Meta Commands):
  /help, /h, /?   - æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯
  /quit, /exit    - é€€å‡ºç¨‹åº
  /version, /v    - æ˜¾ç¤ºç‰ˆæœ¬ä¿¡æ¯
  /status         - æ˜¾ç¤ºå½“å‰çŠ¶æ€
  /config         - æ˜¾ç¤ºé…ç½®ä¿¡æ¯
  /tools          - æ˜¾ç¤ºå¯ç”¨å·¥å…·åˆ—è¡¨
  /clear, /cls    - æ¸…å±
  /history        - æ˜¾ç¤ºå‘½ä»¤å†å²
  /reset          - æ¸…é™¤ä¸Šä¸‹æ–‡å†å²
  /compact        - å‹ç¼©ä¸Šä¸‹æ–‡
  /init           - åˆ†æä»£ç åº“
  /agents         - ç®¡ç†å’ŒæŸ¥çœ‹ Agent

â†’ æˆ–è€…ç›´æ¥è¾“å…¥ä½ çš„é—®é¢˜ï¼Œè®© Jimi å¸®åŠ©ä½ ï¼
```

#### ç‰ˆæœ¬å‘½ä»¤

```
/version     # æ˜¾ç¤ºç‰ˆæœ¬ä¿¡æ¯
/v           # version çš„åˆ«å
```

#### çŠ¶æ€å‘½ä»¤

```
/status      # æ˜¾ç¤ºç³»ç»ŸçŠ¶æ€
```

è¾“å‡ºç¤ºä¾‹ï¼š
```
âœ“ ç³»ç»ŸçŠ¶æ€:
  çŠ¶æ€: âœ… ready
  Agent: Default Agent
  å¯ç”¨å·¥å…·æ•°: 15
  ä¸Šä¸‹æ–‡æ¶ˆæ¯æ•°: 42
  ä¸Šä¸‹æ–‡ Token æ•°: 8,523
```

#### é…ç½®å‘½ä»¤

```
/config      # æ˜¾ç¤ºé…ç½®ä¿¡æ¯
```

è¾“å‡ºç¤ºä¾‹ï¼š
```
âœ“ é…ç½®ä¿¡æ¯:
  LLM: âœ… å·²é…ç½®
  å·¥ä½œç›®å½•: /Users/user/project
  ä¼šè¯ ID: session-20250112-143022
  å†å²æ–‡ä»¶: ~/.jimi/sessions/session-20250112-143022/history.json
  YOLO æ¨¡å¼: âŒ å…³é—­
```

#### å·¥å…·å‘½ä»¤

```
/tools       # æ˜¾ç¤ºå¯ç”¨å·¥å…·åˆ—è¡¨
```

è¾“å‡ºç¤ºä¾‹ï¼š
```
âœ“ å¯ç”¨å·¥å…· (15):

  ğŸ“ æ–‡ä»¶æ“ä½œ:
    â€¢ ReadFile        - è¯»å–æ–‡ä»¶å†…å®¹
    â€¢ WriteFile       - å†™å…¥æ–‡ä»¶å†…å®¹
    â€¢ StrReplaceFile  - å­—ç¬¦ä¸²æ›¿æ¢ç¼–è¾‘æ–‡ä»¶
    â€¢ PatchFile       - åº”ç”¨è¡¥ä¸åˆ°æ–‡ä»¶
    â€¢ Glob            - æŸ¥æ‰¾æ–‡ä»¶
    â€¢ Grep            - æœç´¢æ–‡ä»¶å†…å®¹

  ğŸ’» Shell:
    â€¢ Bash            - æ‰§è¡Œ Shell å‘½ä»¤

  ğŸŒ Web:
    â€¢ FetchURL        - è·å–ç½‘é¡µå†…å®¹
    â€¢ SearchWeb       - æœç´¢ç½‘ç»œ

  ğŸ§° å…¶ä»–:
    â€¢ Think           - æ€è€ƒå·¥å…·
    â€¢ SetTodoList     - è®¾ç½®å¾…åŠåˆ—è¡¨
    â€¢ Task            - å­ Agent ä»»åŠ¡å§”æ‰˜
```

#### æ¸…å±å‘½ä»¤

```
/clear       # æ¸…å±
/cls         # clear çš„åˆ«å
```

#### å†å²å‘½ä»¤

```
/history     # æ˜¾ç¤ºå‘½ä»¤å†å²
```

#### é‡ç½®å‘½ä»¤

```
/reset       # æ¸…é™¤ä¸Šä¸‹æ–‡å†å²
```

#### å‹ç¼©å‘½ä»¤

```
/compact     # å‹ç¼©ä¸Šä¸‹æ–‡
```

#### åˆå§‹åŒ–å‘½ä»¤

```
/init        # åˆ†æä»£ç åº“å¹¶ç”Ÿæˆ AGENTS.md
```

#### Agent å‘½ä»¤

```
/agents                    # åˆ—å‡ºæ‰€æœ‰å¯ç”¨ Agent
/agents <agent-name>       # æŸ¥çœ‹æŒ‡å®š Agent çš„è¯¦ç»†ä¿¡æ¯
/agents run <agent-name>   # åˆ‡æ¢åˆ°æŒ‡å®š Agent
```

### 4.4 Shell å¿«æ·æ–¹å¼

#### ç›´æ¥æ‰§è¡Œ Shell å‘½ä»¤

```
! ls -la
! pwd
! mvn clean package
! git status
```

æ³¨æ„ï¼šShell å‘½ä»¤éœ€è¦ç»è¿‡å®¡æ‰¹ï¼ˆé™¤éå¼€å¯ YOLO æ¨¡å¼ï¼‰

### 4.5 è‡ªç„¶è¯­è¨€äº¤äº’

#### ç›´æ¥æé—®

```
ä»€ä¹ˆæ˜¯ Spring Bootï¼Ÿ
```

#### ä»£ç åˆ†æ

```
è¯·åˆ†æ src/main/java/io/leavesfly/jimi/JimiEngine.java
```

#### ä»£ç ç”Ÿæˆ

```
è¯·å¸®æˆ‘ç”Ÿæˆä¸€ä¸ª REST Controller
```

#### æ–‡ä»¶æ“ä½œ

```
è¯·è¯»å– README.md æ–‡ä»¶
```

#### ä»»åŠ¡å§”æ‰˜

```
è¯·ä½¿ç”¨è®¾è®¡ Agent è®¾è®¡ä¸€ä¸ªè®¢å•æ¨¡å—
```

### 4.6 å·¥ä½œæ¨¡å¼

#### äº¤äº’å¼æ¨¡å¼ï¼ˆé»˜è®¤ï¼‰

ç›´æ¥å¯åŠ¨ Jimiï¼Œè¿›å…¥äº¤äº’å¼å¯¹è¯ï¼š

```bash
./scripts/start.sh
```

ç„¶åå¯ä»¥æŒç»­å¯¹è¯ï¼Œæ‰§è¡Œå¤šä¸ªä»»åŠ¡ã€‚

#### å‘½ä»¤æ¨¡å¼

é€šè¿‡å‘½ä»¤è¡Œå‚æ•°ç›´æ¥æ‰§è¡Œä»»åŠ¡ï¼š

```bash
./scripts/start.sh -c "è¯·åˆ†æè¿™ä¸ªé¡¹ç›®çš„ç»“æ„"
```

æ‰§è¡Œå®Œä»»åŠ¡åè‡ªåŠ¨é€€å‡ºã€‚

#### YOLO æ¨¡å¼

è‡ªåŠ¨æ‰¹å‡†æ‰€æœ‰æ“ä½œï¼Œæ— éœ€äººå·¥ç¡®è®¤ï¼š

```bash
./scripts/start.sh --yolo
```

æˆ–åœ¨é…ç½®æ–‡ä»¶ä¸­è®¾ç½®ï¼š
```json
{
  "features": {
    "enableYoloMode": true
  }
}
```

---

## ç¬¬äº”ç« ï¼šæ ¸å¿ƒåŠŸèƒ½

### 5.1 å¤š Agent ç³»ç»Ÿ

Jimi æä¾›äº†å¤šä¸ªä¸“ä¸šåŒ–çš„ Agentï¼Œæ¯ä¸ª Agent ä¸“æ³¨äºç‰¹å®šé¢†åŸŸçš„ä»»åŠ¡ã€‚

#### å¯ç”¨çš„ Agent

**Default Agentï¼ˆé»˜è®¤ Agentï¼‰**
- ç”¨é€”ï¼šé€šç”¨å¼€å‘åŠ©æ‰‹
- å·¥å…·ï¼šæ‰€æœ‰å·¥å…·
- ç‰¹ç‚¹ï¼šå…¨èƒ½å‹ï¼Œé€‚åˆå¤§å¤šæ•°åœºæ™¯

**Design Agentï¼ˆè®¾è®¡ Agentï¼‰**
- ç”¨é€”ï¼šéœ€æ±‚åˆ†æã€æ¶æ„è®¾è®¡ã€æŠ€æœ¯é€‰å‹
- å·¥å…·ï¼šThinkã€ReadFileã€WriteFileã€Grepã€Globã€FetchURL
- ç‰¹ç‚¹ï¼šæ“…é•¿ç³»ç»Ÿè®¾è®¡å’ŒæŠ€æœ¯æ–¹æ¡ˆè§„åˆ’

**Code Agentï¼ˆç¼–ç  Agentï¼‰**
- ç”¨é€”ï¼šä»£ç å®ç°ã€é‡æ„ã€ä¼˜åŒ–
- å·¥å…·ï¼šReadFileã€WriteFileã€StrReplaceFileã€PatchFileã€Grepã€Globã€Think
- ç‰¹ç‚¹ï¼šä¸“æ³¨äºä»£ç ç¼–å†™å’Œä¿®æ”¹

**Review Agentï¼ˆå®¡æŸ¥ Agentï¼‰**
- ç”¨é€”ï¼šä»£ç è´¨é‡å®¡æŸ¥ã€æœ€ä½³å®è·µæ£€æŸ¥
- å·¥å…·ï¼šReadFileã€Grepã€Globã€Think
- ç‰¹ç‚¹ï¼šåªè¯»æ¨¡å¼ï¼Œä¸ä¿®æ”¹ä»£ç 

**Build Agentï¼ˆæ„å»º Agentï¼‰**
- ç”¨é€”ï¼šé¡¹ç›®æ„å»ºã€ä¾èµ–ç®¡ç†ã€ç¼–è¯‘é”™è¯¯ä¿®å¤
- å·¥å…·ï¼šBashã€ReadFileã€WriteFileã€Grepã€Think
- ç‰¹ç‚¹ï¼šæ“…é•¿å¤„ç†æ„å»ºå’Œç¼–è¯‘é—®é¢˜

**Test Agentï¼ˆæµ‹è¯• Agentï¼‰**
- ç”¨é€”ï¼šæµ‹è¯•è¿è¡Œä¸åˆ†æ
- å·¥å…·ï¼šBashã€ReadFileã€WriteFileã€Grepã€Think
- ç‰¹ç‚¹ï¼šä¸“æ³¨äºæµ‹è¯•æ‰§è¡Œå’Œå¤±è´¥åˆ†æ

**Debug Agentï¼ˆè°ƒè¯• Agentï¼‰**
- ç”¨é€”ï¼šé”™è¯¯è¯Šæ–­ä¸ä¿®å¤
- å·¥å…·ï¼šBashã€ReadFileã€WriteFileã€StrReplaceFileã€Grepã€Globã€Think
- ç‰¹ç‚¹ï¼šæ“…é•¿è°ƒè¯•å’Œä¿®å¤è¿è¡Œæ—¶é”™è¯¯

**Doc Agentï¼ˆæ–‡æ¡£ Agentï¼‰**
- ç”¨é€”ï¼šæŠ€æœ¯æ–‡æ¡£ç¼–å†™ä¸ç»´æŠ¤
- å·¥å…·ï¼šReadFileã€WriteFileã€Grepã€Globã€Thinkã€FetchURL
- ç‰¹ç‚¹ï¼šä¸“æ³¨äºæ–‡æ¡£ç”Ÿæˆ

**Research Agentï¼ˆç ”ç©¶ Agentï¼‰**
- ç”¨é€”ï¼šæœç´¢å’Œç ”ç©¶æŠ€æœ¯ä¿¡æ¯
- å·¥å…·ï¼šFetchURLã€SearchWebã€Think
- ç‰¹ç‚¹ï¼šæ“…é•¿ç½‘ç»œæœç´¢å’Œä¿¡æ¯æ•´ç†

#### ä½¿ç”¨ Agent

**æŸ¥çœ‹æ‰€æœ‰ Agent**
```
/agents
```

**æŸ¥çœ‹ Agent è¯¦æƒ…**
```
/agents design
```

**åˆ‡æ¢ Agent**
```
/agents run design
```

**åœ¨å¯¹è¯ä¸­å§”æ‰˜ä»»åŠ¡ç»™ Agent**
```
è¯·ä½¿ç”¨è®¾è®¡ Agent å¸®æˆ‘è®¾è®¡ä¸€ä¸ªç”µå•†ç³»ç»Ÿçš„è®¢å•æ¨¡å—æ¶æ„
```

Jimi ä¼šè‡ªåŠ¨åˆ›å»ºå­ Agent å¹¶å§”æ‰˜ä»»åŠ¡ã€‚

#### Agent é…ç½®

æ¯ä¸ª Agent éƒ½æœ‰è‡ªå·±çš„é…ç½®æ–‡ä»¶ï¼Œä½äº `src/main/resources/agents/` ç›®å½•ï¼š

```
agents/
â”œâ”€â”€ default/
â”‚   â”œâ”€â”€ agent.yaml
â”‚   â””â”€â”€ system_prompt.md
â”œâ”€â”€ design/
â”‚   â”œâ”€â”€ agent.yaml
â”‚   â””â”€â”€ system_prompt.md
â”œâ”€â”€ code/
â”‚   â”œâ”€â”€ agent.yaml
â”‚   â””â”€â”€ system_prompt.md
â””â”€â”€ ...
```

### 5.2 å·¥å…·ç³»ç»Ÿ

Jimi æä¾›äº†ä¸°å¯Œçš„å·¥å…·ï¼Œç”¨äºæ‰§è¡Œå„ç§æ“ä½œã€‚

#### æ–‡ä»¶æ“ä½œå·¥å…·

**ReadFile - è¯»å–æ–‡ä»¶**
```
è¯·è¯»å– README.md æ–‡ä»¶çš„å†…å®¹
```

**WriteFile - å†™å…¥æ–‡ä»¶**
```
è¯·åˆ›å»ºä¸€ä¸ªæ–°æ–‡ä»¶ hello.txtï¼Œå†…å®¹ä¸º"Hello World"
```

**StrReplaceFile - å­—ç¬¦ä¸²æ›¿æ¢ç¼–è¾‘**
```
è¯·å°† config.json æ–‡ä»¶ä¸­çš„ "localhost" æ›¿æ¢ä¸º "example.com"
```

**PatchFile - åº”ç”¨è¡¥ä¸**
```
è¯·åº”ç”¨è¿™ä¸ªè¡¥ä¸åˆ° UserService.java
```

**Glob - æŸ¥æ‰¾æ–‡ä»¶**
```
è¯·æŸ¥æ‰¾æ‰€æœ‰çš„ .java æ–‡ä»¶
```

**Grep - æœç´¢æ–‡ä»¶å†…å®¹**
```
è¯·æœç´¢åŒ…å« "TODO" çš„æ‰€æœ‰æ–‡ä»¶
```

#### Shell å·¥å…·

**Bash - æ‰§è¡Œ Shell å‘½ä»¤**
```
è¯·æ‰§è¡Œ mvn clean package
```

æˆ–ä½¿ç”¨å¿«æ·æ–¹å¼ï¼š
```
! mvn clean package
```

#### ç½‘ç»œå·¥å…·

**FetchURL - è·å–ç½‘é¡µå†…å®¹**
```
è¯·è·å– https://example.com çš„å†…å®¹
```

**SearchWeb - æœç´¢ç½‘ç»œ**
```
è¯·æœç´¢"Spring Boot æœ€ä½³å®è·µ"
```

#### æ€è€ƒå·¥å…·

**Think - å¤æ‚æ¨ç†ä¸è®¡åˆ’**
```
è¯·æ€è€ƒä¸€ä¸‹å¦‚ä½•ä¼˜åŒ–è¿™ä¸ªç®—æ³•
```

Jimi ä¼šä½¿ç”¨ Think å·¥å…·è¿›è¡Œæ·±åº¦æ€è€ƒï¼Œè®°å½•æ¨ç†è¿‡ç¨‹ã€‚

#### ä»»åŠ¡ç®¡ç†å·¥å…·

**SetTodoList - è®¾ç½®å¾…åŠåˆ—è¡¨**
```
è¯·åˆ›å»ºä¸€ä¸ªå¾…åŠåˆ—è¡¨ï¼š
1. è®¾è®¡æ•°æ®åº“è¡¨
2. å®ç° API æ¥å£
3. ç¼–å†™å•å…ƒæµ‹è¯•
```

#### å­ Agent å·¥å…·

**Task - ä»»åŠ¡å§”æ‰˜**
```
è¯·ä½¿ç”¨è®¾è®¡ Agent è®¾è®¡è®¢å•æ¨¡å—
```

### 5.3 Skills ç³»ç»Ÿ

Skills æ˜¯ Jimi çš„çŸ¥è¯†æ³¨å…¥æœºåˆ¶ï¼Œå…è®¸å°†é¢†åŸŸä¸“ä¸šçŸ¥è¯†æ¨¡å—åŒ–å¹¶è‡ªåŠ¨æ¿€æ´»ã€‚

#### å†…ç½® Skills

**code-review Skill**
- å…³é”®è¯ï¼šä»£ç å®¡æŸ¥ã€code reviewã€review
- å†…å®¹ï¼šä»£ç å®¡æŸ¥çš„æœ€ä½³å®è·µå’Œæ£€æŸ¥æ¸…å•

**unit-testing Skill**
- å…³é”®è¯ï¼šå•å…ƒæµ‹è¯•ã€unit testã€testing
- å†…å®¹ï¼šå•å…ƒæµ‹è¯•çš„åŸåˆ™å’Œå®è·µ

#### åˆ›å»ºè‡ªå®šä¹‰ Skill

**æ­¥éª¤ 1ï¼šåˆ›å»º Skill ç›®å½•**
```
skills/
â””â”€â”€ my-skill/
    â””â”€â”€ skill.yaml
```

**æ­¥éª¤ 2ï¼šç¼–å†™ skill.yaml**
```yaml
name: My Skill
description: æˆ‘çš„ä¸“ä¸šæŠ€èƒ½
keywords:
  - å…³é”®è¯1
  - å…³é”®è¯2
content: |
  è¿™é‡Œæ˜¯ Skill çš„è¯¦ç»†å†…å®¹ï¼ŒåŒ…æ‹¬ï¼š
  - ä¸“ä¸šçŸ¥è¯†
  - æœ€ä½³å®è·µ
  - ä»£ç ç¤ºä¾‹
  - æ³¨æ„äº‹é¡¹
```

**æ­¥éª¤ 3ï¼šå¯ç”¨ Skills åŠŸèƒ½**

åœ¨ `src/main/resources/application.yml` ä¸­ï¼š
```yaml
jimi:
  skill:
    enabled: true
    auto-match: true
```

#### Skill è‡ªåŠ¨æ¿€æ´»

å½“ç”¨æˆ·è¾“å…¥åŒ…å« Skill å…³é”®è¯çš„å†…å®¹æ—¶ï¼ŒJimi ä¼šè‡ªåŠ¨æ¿€æ´»ç›¸åº”çš„ Skillï¼š

```
è¯·å¸®æˆ‘åšä»£ç å®¡æŸ¥
```

Jimi ä¼šè‡ªåŠ¨åŠ è½½ code-review Skillï¼Œå¹¶æŒ‰ç…§ Skill ä¸­çš„çŸ¥è¯†è¿›è¡Œå®¡æŸ¥ã€‚

### 5.4 ä¸Šä¸‹æ–‡ç®¡ç†

#### æŸ¥çœ‹ä¸Šä¸‹æ–‡çŠ¶æ€

```
/status
```

#### æ¸…é™¤ä¸Šä¸‹æ–‡

```
/reset
```

#### å‹ç¼©ä¸Šä¸‹æ–‡

å½“å¯¹è¯å†å²è¿‡é•¿æ—¶ï¼Œå¯ä»¥å‹ç¼©ä¸Šä¸‹æ–‡ä»¥èŠ‚çœ Tokenï¼š

```
/compact
```

Jimi ä¼šä½¿ç”¨ LLM å¯¹å†å²æ¶ˆæ¯è¿›è¡Œå‹ç¼©ï¼Œä¿ç•™å…³é”®ä¿¡æ¯ã€‚

#### ä¸Šä¸‹æ–‡è‡ªåŠ¨å‹ç¼©

Jimi ä¼šæ ¹æ® Token ä½¿ç”¨æƒ…å†µè‡ªåŠ¨è§¦å‘å‹ç¼©ï¼š

- å½“ä¸Šä¸‹æ–‡è¶…è¿‡æ¨¡å‹æœ€å¤§ä¸Šä¸‹æ–‡çš„ 80% æ—¶è‡ªåŠ¨è§¦å‘
- å‹ç¼©åçš„å†…å®¹ä¼šä¿å­˜åœ¨ä¸Šä¸‹æ–‡ä¸­
- åŸå§‹æ¶ˆæ¯ä¼šè¢«åˆ é™¤

### 5.5 ä¼šè¯ç®¡ç†

#### ä¼šè¯æŒä¹…åŒ–

Jimi ä¼šè‡ªåŠ¨ä¿å­˜æ‰€æœ‰ä¼šè¯å†å²åˆ°æœ¬åœ°ï¼š

```
~/.jimi/sessions/<session-id>/history.json
```

#### æ¢å¤ä¼šè¯

```bash
./scripts/start.sh --resume
```

#### æŒ‡å®šä¼šè¯

```bash
./scripts/start.sh --session my-project
```

#### æŸ¥çœ‹ä¼šè¯ä¿¡æ¯

```
/config
```

### 5.6 å®¡æ‰¹æœºåˆ¶

å¯¹äºæ•æ„Ÿæ“ä½œï¼ˆå¦‚æ–‡ä»¶å†™å…¥ã€å‘½ä»¤æ‰§è¡Œï¼‰ï¼ŒJimi ä¼šè¯·æ±‚äººå·¥å®¡æ‰¹ã€‚

#### å¯ç”¨å®¡æ‰¹æœºåˆ¶

åœ¨é…ç½®æ–‡ä»¶ä¸­ï¼š
```json
{
  "features": {
    "enableApproval": true
  }
}
```

#### å®¡æ‰¹æµç¨‹

```
Jimi: æˆ‘éœ€è¦æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š
  å†™å…¥æ–‡ä»¶: config.json
  å†…å®¹: {"key": "value"}
  
æ˜¯å¦æ‰¹å‡†ï¼Ÿ[Y/n]
```

è¾“å…¥ `Y` æ‰¹å‡†ï¼Œè¾“å…¥ `n` æ‹’ç»ã€‚

#### YOLO æ¨¡å¼

å¦‚æœä½ ä¿¡ä»» Jimiï¼Œå¯ä»¥å¼€å¯ YOLO æ¨¡å¼ï¼Œè‡ªåŠ¨æ‰¹å‡†æ‰€æœ‰æ“ä½œï¼š

```bash
./scripts/start.sh --yolo
```

æˆ–åœ¨é…ç½®æ–‡ä»¶ä¸­ï¼š
```json
{
  "features": {
    "enableYoloMode": true
  }
}
```

---

## ç¬¬å…­ç« ï¼šé«˜çº§ç‰¹æ€§

### 6.1 è‡ªå®šä¹‰ Agent

#### åˆ›å»º Agent é…ç½®æ–‡ä»¶

åœ¨ `src/main/resources/agents/` ç›®å½•ä¸‹åˆ›å»ºæ–°çš„ Agent ç›®å½•ï¼š

```
agents/
â””â”€â”€ my-custom-agent/
    â”œâ”€â”€ agent.yaml
    â””â”€â”€ system_prompt.md
```

#### agent.yaml ç¤ºä¾‹

```yaml
name: My Custom Agent
description: æˆ‘çš„è‡ªå®šä¹‰ Agent

# ç³»ç»Ÿæç¤ºè¯æ–‡ä»¶
system_prompt: system_prompt.md

# ç³»ç»Ÿæç¤ºè¯å‚æ•°ï¼ˆå¯é€‰ï¼‰
system_prompt_args:
  CUSTOM_ARG: "test value"

# æŒ‡å®šæ¨¡å‹ï¼ˆå¯é€‰ï¼‰
model: qwen3-max

# å¯ç”¨å·¥å…·åˆ—è¡¨
tools:
  - ReadFile
  - WriteFile
  - Bash
  - Think

# æ’é™¤å·¥å…·ï¼ˆå¯é€‰ï¼‰
exclude_tools:
  - DangerousTool

# å­ Agentï¼ˆå¯é€‰ï¼‰
subagents:
  code:
    path: code/agent.yaml
    description: ä»£ç å®ç°
  review:
    path: review/agent.yaml
    description: ä»£ç å®¡æŸ¥
```

#### system_prompt.md ç¤ºä¾‹

```markdown
# My Custom Agent

ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„ ${CUSTOM_ARG} Agentã€‚

## å·¥ä½œç›®å½•
${JIMI_WORK_DIR}

## èƒ½åŠ›
- èƒ½åŠ› 1
- èƒ½åŠ› 2

## å·¥ä½œæµç¨‹
1. æ­¥éª¤ 1
2. æ­¥éª¤ 2
```

#### ä½¿ç”¨è‡ªå®šä¹‰ Agent

```bash
./scripts/start.sh --agent my-custom-agent
```

æˆ–åœ¨å¯¹è¯ä¸­ï¼š
```
è¯·ä½¿ç”¨ my-custom-agent å¸®æˆ‘å®Œæˆä»»åŠ¡
```

### 6.2 è‡ªå®šä¹‰å·¥å…·

#### å®ç° ToolProvider æ¥å£

```java
@Component
public class MyToolProvider implements ToolProvider {
    
    @Override
    public String getName() {
        return "My Tool Provider";
    }
    
    @Override
    public int getOrder() {
        return 50;  // åŠ è½½é¡ºåº
    }
    
    @Override
    public boolean supports(AgentSpec agentSpec, Runtime runtime) {
        // åˆ¤æ–­æ˜¯å¦æ”¯æŒè¯¥ Agent
        return true;
    }
    
    @Override
    public List<Tool<?>> createTools(AgentSpec agentSpec, Runtime runtime) {
        return List.of(new MyCustomTool());
    }
}
```

#### å®ç° Tool æ¥å£

```java
public class MyCustomTool extends AbstractTool<MyParams> {
    
    @Override
    public String getName() {
        return "my_custom_tool";
    }
    
    @Override
    public String getDescription() {
        return "æˆ‘çš„è‡ªå®šä¹‰å·¥å…·";
    }
    
    @Override
    public Class<MyParams> getParameterClass() {
        return MyParams.class;
    }
    
    @Override
    protected Mono<ToolResult> executeInternal(MyParams params) {
        // å·¥å…·é€»è¾‘å®ç°
        return Mono.just(ToolResult.success("æ‰§è¡ŒæˆåŠŸ"));
    }
    
    @Data
    @NoArgsConstructor
    @AllArgsConstructor
    public static class MyParams {
        @JsonPropertyDescription("å‚æ•°æè¿°")
        private String param1;
    }
}
```

Spring ä¼šè‡ªåŠ¨æ‰«æå¹¶æ³¨å†Œå·¥å…·ã€‚

### 6.3 è‡ªå®šä¹‰å‘½ä»¤

#### å®ç° CommandHandler æ¥å£

```java
@Component
public class MyCommandHandler implements CommandHandler {
    
    @Override
    public String getName() {
        return "mycommand";
    }
    
    @Override
    public String getDescription() {
        return "æˆ‘çš„è‡ªå®šä¹‰å‘½ä»¤";
    }
    
    @Override
    public List<String> getAliases() {
        return List.of("mc", "mycmd");
    }
    
    @Override
    public String getUsage() {
        return "/mycommand [args]";
    }
    
    @Override
    public void execute(CommandContext context) throws Exception {
        OutputFormatter out = context.getOutputFormatter();
        out.printSuccess("å‘½ä»¤æ‰§è¡ŒæˆåŠŸ");
    }
}
```

Spring ä¼šè‡ªåŠ¨æ³¨å†Œå‘½ä»¤ã€‚

### 6.4 é›†æˆ MCP å·¥å…·

MCP (Model Context Protocol) æ˜¯ Anthropic æå‡ºçš„æ ‡å‡†åè®®ï¼Œç”¨äº LLM ä¸å¤–éƒ¨å·¥å…·çš„é›†æˆã€‚

#### åˆ›å»º MCP é…ç½®æ–‡ä»¶

åœ¨ `src/main/resources/mcp/` ç›®å½•ä¸‹åˆ›å»ºé…ç½®ï¼š

**HTTP æ–¹å¼**
```json
{
  "name": "my-http-service",
  "description": "æˆ‘çš„ HTTP æœåŠ¡",
  "type": "http",
  "config": {
    "url": "http://localhost:8080"
  }
}
```

**StdIO æ–¹å¼**
```json
{
  "name": "my-stdio-service",
  "description": "æˆ‘çš„ StdIO æœåŠ¡",
  "type": "stdio",
  "config": {
    "command": "node",
    "args": ["server.js"]
  }
}
```

#### å¯åŠ¨æ—¶åŠ è½½ MCP é…ç½®

```bash
./scripts/start.sh --mcp-config-file src/main/resources/mcp/my-service.json
```

#### å†…ç½® MCP é…ç½®ç¤ºä¾‹

Jimi æä¾›äº†å¤šä¸ª MCP é…ç½®ç¤ºä¾‹ï¼š

- `mcp-filesystem.json`ï¼šæ–‡ä»¶ç³»ç»Ÿè®¿é—®
- `mcp-git.json`ï¼šGit æ“ä½œ
- `mcp-github.json`ï¼šGitHub API
- `mcp-database.json`ï¼šæ•°æ®åº“è®¿é—®
- `mcp-http-basic.json`ï¼šHTTP è¯·æ±‚

### 6.5 é…ç½®ä¼˜åŒ–

#### JVM å‚æ•°ä¼˜åŒ–

```bash
./scripts/start.sh \
  -Xmx2g \
  -Xms512m \
  -XX:+UseG1GC \
  -XX:MaxGCPauseMillis=200
```

#### æ€§èƒ½ä¼˜åŒ–å»ºè®®

**å†…å­˜è®¾ç½®**
- å¼€å‘ç¯å¢ƒï¼š`-Xmx1g -Xms512m`
- ç”Ÿäº§ç¯å¢ƒï¼š`-Xmx2g -Xms1g`

**GC ä¼˜åŒ–**
- ä½¿ç”¨ G1GCï¼š`-XX:+UseG1GC`
- è®¾ç½®æœ€å¤§æš‚åœæ—¶é—´ï¼š`-XX:MaxGCPauseMillis=200`

**æ—¥å¿—ä¼˜åŒ–**
```yaml
logging:
  level:
    io.leavesfly.jimi: INFO
    root: WARN
```

### 6.6 å¤šç¯å¢ƒé…ç½®

#### åˆ›å»ºä¸åŒç¯å¢ƒçš„é…ç½®

```
~/.jimi/
â”œâ”€â”€ config-dev.json
â”œâ”€â”€ config-prod.json
â””â”€â”€ config.json -> config-dev.json
```

#### åˆ‡æ¢ç¯å¢ƒ

```bash
cd ~/.jimi
ln -sf config-prod.json config.json
```

### 6.7 Shell åˆ«å

#### æ·»åŠ åˆ° ~/.zshrc æˆ– ~/.bash_profile

```bash
# Jimi åˆ«å
alias jimi='/path/to/Jimi/scripts/start.sh'
alias jimi-build='/path/to/Jimi/scripts/build.sh'
alias jimi-config='/path/to/Jimi/scripts/init-config.sh'
alias jimi-yolo='/path/to/Jimi/scripts/start.sh --yolo'
```

é‡æ–°åŠ è½½ï¼š
```bash
source ~/.zshrc
```

ä½¿ç”¨ï¼š
```bash
jimi              # å¯åŠ¨ Jimi
jimi-build        # æ„å»ºé¡¹ç›®
jimi-config       # é‡æ–°é…ç½®
jimi-yolo         # YOLO æ¨¡å¼å¯åŠ¨
```

---

## ç¬¬ä¸ƒç« ï¼šæ‰©å±•å¼€å‘

### 7.1 å¼€å‘ç¯å¢ƒæ­å»º

#### å·¥å…·å‡†å¤‡
- IntelliJ IDEA æˆ– Eclipse
- Java 17 SDK
- Maven 3.6+
- Git

#### å¯¼å…¥é¡¹ç›®

```bash
git clone https://github.com/your-repository/Jimi.git
cd Jimi
```

ä½¿ç”¨ IDE å¯¼å…¥ Maven é¡¹ç›®ã€‚

### 7.2 é¡¹ç›®ç»“æ„

```
src/main/java/io/leavesfly/jimi/
â”œâ”€â”€ agent/                  # Agent ç³»ç»Ÿ
â”‚   â”œâ”€â”€ Agent.java
â”‚   â”œâ”€â”€ AgentRegistry.java
â”‚   â””â”€â”€ AgentSpec.java
â”œâ”€â”€ cli/                    # å‘½ä»¤è¡Œå…¥å£
â”‚   â””â”€â”€ CliApplication.java
â”œâ”€â”€ command/                # å‘½ä»¤å¤„ç†ç³»ç»Ÿ
â”‚   â”œâ”€â”€ handlers/
â”‚   â”œâ”€â”€ CommandHandler.java
â”‚   â””â”€â”€ CommandRegistry.java
â”œâ”€â”€ config/                 # é…ç½®ç®¡ç†
â”‚   â”œâ”€â”€ JimiConfig.java
â”‚   â””â”€â”€ LLMProviderConfig.java
â”œâ”€â”€ engine/                 # æ ¸å¿ƒå¼•æ“
â”‚   â”œâ”€â”€ AgentExecutor.java
â”‚   â”œâ”€â”€ Engine.java
â”‚   â””â”€â”€ JimiEngine.java
â”œâ”€â”€ llm/                    # LLM é›†æˆ
â”‚   â”œâ”€â”€ message/
â”‚   â”œâ”€â”€ provider/
â”‚   â””â”€â”€ LLMFactory.java
â”œâ”€â”€ tool/                   # å·¥å…·ç³»ç»Ÿ
â”‚   â”œâ”€â”€ bash/
â”‚   â”œâ”€â”€ file/
â”‚   â”œâ”€â”€ Tool.java
â”‚   â””â”€â”€ ToolRegistry.java
â”œâ”€â”€ ui/                     # ç”¨æˆ·ç•Œé¢
â”‚   â””â”€â”€ shell/
â””â”€â”€ JimiApplication.java    # å¯åŠ¨ç±»
```

### 7.3 å¼€å‘æ–°å·¥å…·

#### æ­¥éª¤ 1ï¼šåˆ›å»º Tool ç±»

```java
package io.leavesfly.jimi.tool.custom;

import io.leavesfly.jimi.tool.AbstractTool;
import io.leavesfly.jimi.tool.ToolResult;
import reactor.core.publisher.Mono;
import lombok.*;

public class CustomTool extends AbstractTool<CustomTool.Params> {
    
    @Override
    public String getName() {
        return "custom_tool";
    }
    
    @Override
    public String getDescription() {
        return "è‡ªå®šä¹‰å·¥å…·ç¤ºä¾‹";
    }
    
    @Override
    public Class<Params> getParameterClass() {
        return Params.class;
    }
    
    @Override
    protected Mono<ToolResult> executeInternal(Params params) {
        // å®ç°å·¥å…·é€»è¾‘
        String result = "å¤„ç† " + params.input;
        return Mono.just(ToolResult.success(result));
    }
    
    @Data
    @NoArgsConstructor
    @AllArgsConstructor
    public static class Params {
        @JsonPropertyDescription("è¾“å…¥å‚æ•°")
        private String input;
    }
}
```

#### æ­¥éª¤ 2ï¼šåˆ›å»º ToolProvider

```java
package io.leavesfly.jimi.tool.custom;

import io.leavesfly.jimi.tool.Tool;
import io.leavesfly.jimi.tool.ToolProvider;
import org.springframework.stereotype.Component;
import java.util.List;

@Component
public class CustomToolProvider implements ToolProvider {
    
    @Override
    public String getName() {
        return "Custom Tool Provider";
    }
    
    @Override
    public int getOrder() {
        return 50;
    }
    
    @Override
    public boolean supports(AgentSpec agentSpec, Runtime runtime) {
        return true;
    }
    
    @Override
    public List<Tool<?>> createTools(AgentSpec agentSpec, Runtime runtime) {
        return List.of(new CustomTool());
    }
}
```

#### æ­¥éª¤ 3ï¼šæµ‹è¯•å·¥å…·

```java
@Test
void testCustomTool() {
    CustomTool tool = new CustomTool();
    CustomTool.Params params = new CustomTool.Params("test");
    
    ToolResult result = tool.execute(params).block();
    
    assertTrue(result.isSuccess());
    assertEquals("å¤„ç† test", result.getOutput());
}
```

### 7.4 å¼€å‘æ–° Agent

#### æ­¥éª¤ 1ï¼šåˆ›å»º Agent ç›®å½•

```
src/main/resources/agents/custom/
â”œâ”€â”€ agent.yaml
â””â”€â”€ system_prompt.md
```

#### æ­¥éª¤ 2ï¼šç¼–å†™ agent.yaml

```yaml
name: Custom Agent
description: è‡ªå®šä¹‰ Agent

system_prompt: system_prompt.md

system_prompt_args:
  ROLE: "ä¸“ä¸šåŠ©æ‰‹"

model: qwen3-max

tools:
  - ReadFile
  - WriteFile
  - Think
  - custom_tool
```

#### æ­¥éª¤ 3ï¼šç¼–å†™ system_prompt.md

```markdown
# Custom Agent

ä½ æ˜¯ä¸€ä¸ª ${ROLE}ã€‚

å·¥ä½œç›®å½•ï¼š${JIMI_WORK_DIR}

## èŒè´£
1. ä»»åŠ¡ 1
2. ä»»åŠ¡ 2

## å·¥ä½œæµç¨‹
...
```

#### æ­¥éª¤ 4ï¼šæµ‹è¯• Agent

```bash
./scripts/start.sh --agent custom
```

### 7.5 å¼€å‘æ–°å‘½ä»¤

#### æ­¥éª¤ 1ï¼šåˆ›å»º CommandHandler

```java
package io.leavesfly.jimi.command.handlers;

import io.leavesfly.jimi.command.CommandContext;
import io.leavesfly.jimi.command.CommandHandler;
import org.springframework.stereotype.Component;
import java.util.List;

@Component
public class CustomCommandHandler implements CommandHandler {
    
    @Override
    public String getName() {
        return "custom";
    }
    
    @Override
    public String getDescription() {
        return "è‡ªå®šä¹‰å‘½ä»¤";
    }
    
    @Override
    public List<String> getAliases() {
        return List.of("cust", "c");
    }
    
    @Override
    public String getUsage() {
        return "/custom [arg]";
    }
    
    @Override
    public void execute(CommandContext context) throws Exception {
        String arg = context.getArg(0);
        context.getOutputFormatter()
            .printSuccess("æ‰§è¡Œè‡ªå®šä¹‰å‘½ä»¤: " + arg);
    }
}
```

#### æ­¥éª¤ 2ï¼šæµ‹è¯•å‘½ä»¤

å¯åŠ¨ Jimiï¼Œè¾“å…¥ï¼š
```
/custom test
```

### 7.6 å•å…ƒæµ‹è¯•

#### æµ‹è¯•å·¥å…·

```java
@SpringBootTest
class CustomToolTest {
    
    @Test
    void testExecute() {
        CustomTool tool = new CustomTool();
        CustomTool.Params params = new CustomTool.Params("test");
        
        ToolResult result = tool.execute(params).block();
        
        assertNotNull(result);
        assertTrue(result.isSuccess());
    }
}
```

#### æµ‹è¯• Agent

```java
@SpringBootTest
class CustomAgentTest {
    
    @Autowired
    private AgentRegistry agentRegistry;
    
    @Test
    void testLoadAgent() {
        Path agentPath = Paths.get("src/main/resources/agents/custom/agent.yaml");
        Agent agent = agentRegistry.loadAgent(agentPath, runtime).block();
        
        assertNotNull(agent);
        assertEquals("Custom Agent", agent.getName());
    }
}
```

### 7.7 è°ƒè¯•æŠ€å·§

#### æ—¥å¿—é…ç½®

åœ¨ `src/main/resources/application.yml` ä¸­ï¼š

```yaml
logging:
  level:
    io.leavesfly.jimi: DEBUG
    io.leavesfly.jimi.tool: TRACE
```

#### ä½¿ç”¨æ–­ç‚¹

åœ¨ IDE ä¸­è®¾ç½®æ–­ç‚¹ï¼Œä»¥ Debug æ¨¡å¼å¯åŠ¨ï¼š

```bash
./scripts/start.sh -agentlib:jdwp=transport=dt_socket,server=y,suspend=y,address=5005
```

ç„¶ååœ¨ IDE ä¸­è¿æ¥åˆ°ç«¯å£ 5005ã€‚

---

## ç¬¬å…«ç« ï¼šæ•…éšœæ’é™¤

### 8.1 å¸¸è§é—®é¢˜

#### é—®é¢˜ 1ï¼šJava ç‰ˆæœ¬è¿‡ä½

**ç—‡çŠ¶**
```
Java ç‰ˆæœ¬è¿‡ä½ï¼Œéœ€è¦ Java 17+ï¼Œå½“å‰ç‰ˆæœ¬: 8
```

**è§£å†³æ–¹æ¡ˆ**

macOS:
```bash
brew install openjdk@17
export JAVA_HOME=$(/usr/libexec/java_home -v 17)
```

Linux (Ubuntu/Debian):
```bash
sudo apt install openjdk-17-jdk
export JAVA_HOME=/usr/lib/jvm/java-17-openjdk-amd64
```

å°† export å‘½ä»¤æ·»åŠ åˆ° `~/.zshrc` æˆ– `~/.bash_profile`ã€‚

#### é—®é¢˜ 2ï¼šæœªæ‰¾åˆ° JAR æ–‡ä»¶

**ç—‡çŠ¶**
```
æœªæ‰¾åˆ° Jimi JAR æ–‡ä»¶
è¯·å…ˆè¿è¡Œæ„å»ºè„šæœ¬: ./scripts/build.sh
```

**è§£å†³æ–¹æ¡ˆ**
```bash
./scripts/build.sh --skip-tests
```

#### é—®é¢˜ 3ï¼šAPI Key æ— æ•ˆ

**ç—‡çŠ¶**
```
LLM API è°ƒç”¨å¤±è´¥: 401 Unauthorized
```

**è§£å†³æ–¹æ¡ˆ**

æ£€æŸ¥é…ç½®æ–‡ä»¶ `~/.jimi/config.json`ï¼š
```json
{
  "providers": {
    "qwen": {
      "api_key": "your-valid-api-key"
    }
  }
}
```

æˆ–é‡æ–°è¿è¡Œé…ç½®å‘å¯¼ï¼š
```bash
./scripts/init-config.sh
```

#### é—®é¢˜ 4ï¼šæ„å»ºå¤±è´¥

**ç—‡çŠ¶**
```
Maven æ„å»ºå¤±è´¥
```

**è§£å†³æ–¹æ¡ˆ**

æ¸…ç†åé‡è¯•ï¼š
```bash
./scripts/build.sh --clean
```

æ£€æŸ¥ç½‘ç»œè¿æ¥ï¼š
```bash
ping repo.maven.apache.org
```

ä½¿ç”¨å›½å†…é•œåƒï¼ˆåœ¨ `~/.m2/settings.xml` ä¸­ï¼‰ï¼š
```xml
<mirror>
  <id>aliyun</id>
  <mirrorOf>central</mirrorOf>
  <url>https://maven.aliyun.com/repository/central</url>
</mirror>
```

#### é—®é¢˜ 5ï¼šå†…å­˜ä¸è¶³

**ç—‡çŠ¶**
```
java.lang.OutOfMemoryError: Java heap space
```

**è§£å†³æ–¹æ¡ˆ**

å¢åŠ å†…å­˜ï¼š
```bash
./scripts/start.sh -Xmx2g
```

#### é—®é¢˜ 6ï¼šç«¯å£å†²çª

**ç—‡çŠ¶**
```
Address already in use
```

**è§£å†³æ–¹æ¡ˆ**

æŸ¥æ‰¾å ç”¨ç«¯å£çš„è¿›ç¨‹ï¼š
```bash
lsof -i :8080
```

æ€æ­»è¿›ç¨‹ï¼š
```bash
kill -9 <PID>
```

æˆ–ä½¿ç”¨ä¸åŒçš„ç«¯å£ï¼š
```bash
./scripts/start.sh -Dserver.port=8081
```

### 8.2 æ—¥å¿—åˆ†æ

#### æŸ¥çœ‹æ—¥å¿—

Jimi çš„æ—¥å¿—ä½äºï¼š
```
~/.jimi/logs/jimi.log
```

#### æ—¥å¿—çº§åˆ«

åœ¨ `src/main/resources/application.yml` ä¸­è°ƒæ•´ï¼š

```yaml
logging:
  level:
    root: INFO
    io.leavesfly.jimi: DEBUG
```

#### å®æ—¶æŸ¥çœ‹æ—¥å¿—

```bash
tail -f ~/.jimi/logs/jimi.log
```

### 8.3 æ€§èƒ½é—®é¢˜

#### å“åº”é€Ÿåº¦æ…¢

**å¯èƒ½åŸå› **
- LLM æœåŠ¡å“åº”æ…¢
- ä¸Šä¸‹æ–‡è¿‡é•¿
- ç½‘ç»œè¿æ¥é—®é¢˜

**è§£å†³æ–¹æ¡ˆ**
1. åˆ‡æ¢åˆ°æ›´å¿«çš„æ¨¡å‹
2. å‹ç¼©ä¸Šä¸‹æ–‡ï¼š`/compact`
3. æ£€æŸ¥ç½‘ç»œè¿æ¥

#### å†…å­˜å ç”¨é«˜

**å¯èƒ½åŸå› **
- ä¸Šä¸‹æ–‡è¿‡é•¿
- å†å²æ¶ˆæ¯è¿‡å¤š
- ç¼“å­˜è¿‡å¤§

**è§£å†³æ–¹æ¡ˆ**
1. å®šæœŸæ¸…é™¤ä¸Šä¸‹æ–‡ï¼š`/reset`
2. å‡å°‘æœ€å¤§æ­¥æ•°
3. è°ƒæ•´ JVM å‚æ•°

### 8.4 é…ç½®é—®é¢˜

#### é…ç½®æ–‡ä»¶æŸå

**ç—‡çŠ¶**
```
Failed to load configuration
```

**è§£å†³æ–¹æ¡ˆ**

å¤‡ä»½å¹¶é‡æ–°ç”Ÿæˆï¼š
```bash
mv ~/.jimi/config.json ~/.jimi/config.json.bak
./scripts/init-config.sh
```

#### æ— æ³•æ‰¾åˆ°é…ç½®æ–‡ä»¶

**ç—‡çŠ¶**
```
æœªæ‰¾åˆ°é…ç½®æ–‡ä»¶: ~/.jimi/config.json
```

**è§£å†³æ–¹æ¡ˆ**
```bash
./scripts/init-config.sh
```

### 8.5 è·å–å¸®åŠ©

#### æŸ¥çœ‹æ–‡æ¡£
- README.md
- docs/ç”¨æˆ·ä½¿ç”¨æŒ‡å—.md
- src/main/resources/agents/*/system_prompt.md

#### åœ¨çº¿å¸®åŠ©
```
/help
```

#### ç¤¾åŒºæ”¯æŒ
- GitHub Issues: https://github.com/your-repository/Jimi/issues
- GitHub Discussions: https://github.com/your-repository/Jimi/discussions

---

## é™„å½•

### é™„å½• Aï¼šå‘½ä»¤å‚è€ƒ

#### å…ƒå‘½ä»¤åˆ—è¡¨

| å‘½ä»¤ | åˆ«å | è¯´æ˜ |
|------|------|------|
| /help | /h, /? | æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯ |
| /quit | /exit | é€€å‡ºç¨‹åº |
| /version | /v | æ˜¾ç¤ºç‰ˆæœ¬ä¿¡æ¯ |
| /status | - | æ˜¾ç¤ºç³»ç»ŸçŠ¶æ€ |
| /config | - | æ˜¾ç¤ºé…ç½®ä¿¡æ¯ |
| /tools | - | æ˜¾ç¤ºå·¥å…·åˆ—è¡¨ |
| /clear | /cls | æ¸…å± |
| /history | - | æ˜¾ç¤ºå‘½ä»¤å†å² |
| /reset | - | æ¸…é™¤ä¸Šä¸‹æ–‡ |
| /compact | - | å‹ç¼©ä¸Šä¸‹æ–‡ |
| /init | - | åˆ†æä»£ç åº“ |
| /agents | - | ç®¡ç† Agent |

#### å¯åŠ¨å‚æ•°

| å‚æ•° | è¯´æ˜ | ç¤ºä¾‹ |
|------|------|------|
| --work-dir | æŒ‡å®šå·¥ä½œç›®å½• | --work-dir /path/to/project |
| --agent | æŒ‡å®š Agent | --agent design |
| --agent-file | æŒ‡å®š Agent æ–‡ä»¶ | --agent-file /path/to/agent.yaml |
| --session | æŒ‡å®šä¼šè¯ | --session my-project |
| --resume | æ¢å¤ä¸Šæ¬¡ä¼šè¯ | --resume |
| --yolo | YOLO æ¨¡å¼ | --yolo |
| --mcp-config-file | MCP é…ç½®æ–‡ä»¶ | --mcp-config-file mcp.json |
| -c | æ‰§è¡Œå‘½ä»¤åé€€å‡º | -c "åˆ†æé¡¹ç›®" |
| -Xmx | æœ€å¤§å†…å­˜ | -Xmx2g |
| -Xms | åˆå§‹å†…å­˜ | -Xms512m |

### é™„å½• Bï¼šå·¥å…·å‚è€ƒ

#### æ–‡ä»¶æ“ä½œå·¥å…·

**ReadFile**
- åŠŸèƒ½ï¼šè¯»å–æ–‡ä»¶å†…å®¹
- å‚æ•°ï¼š
  - `path`: æ–‡ä»¶è·¯å¾„ï¼ˆå¿…éœ€ï¼‰
- ç¤ºä¾‹ï¼š`è¯·è¯»å– README.md`

**WriteFile**
- åŠŸèƒ½ï¼šå†™å…¥æ–‡ä»¶å†…å®¹
- å‚æ•°ï¼š
  - `path`: æ–‡ä»¶è·¯å¾„ï¼ˆå¿…éœ€ï¼‰
  - `content`: æ–‡ä»¶å†…å®¹ï¼ˆå¿…éœ€ï¼‰
- ç¤ºä¾‹ï¼š`è¯·åˆ›å»ºæ–‡ä»¶ test.txtï¼Œå†…å®¹ä¸º"Hello"`

**StrReplaceFile**
- åŠŸèƒ½ï¼šå­—ç¬¦ä¸²æ›¿æ¢ç¼–è¾‘æ–‡ä»¶
- å‚æ•°ï¼š
  - `path`: æ–‡ä»¶è·¯å¾„ï¼ˆå¿…éœ€ï¼‰
  - `old_str`: è¦æ›¿æ¢çš„å­—ç¬¦ä¸²ï¼ˆå¿…éœ€ï¼‰
  - `new_str`: æ–°å­—ç¬¦ä¸²ï¼ˆå¿…éœ€ï¼‰
- ç¤ºä¾‹ï¼š`å°† config.json ä¸­çš„ localhost æ›¿æ¢ä¸º example.com`

**PatchFile**
- åŠŸèƒ½ï¼šåº”ç”¨è¡¥ä¸åˆ°æ–‡ä»¶
- å‚æ•°ï¼š
  - `path`: æ–‡ä»¶è·¯å¾„ï¼ˆå¿…éœ€ï¼‰
  - `patch`: è¡¥ä¸å†…å®¹ï¼ˆå¿…éœ€ï¼‰
- ç¤ºä¾‹ï¼š`åº”ç”¨è¡¥ä¸åˆ° UserService.java`

**Glob**
- åŠŸèƒ½ï¼šæŸ¥æ‰¾æ–‡ä»¶
- å‚æ•°ï¼š
  - `pattern`: æ–‡ä»¶æ¨¡å¼ï¼ˆå¿…éœ€ï¼‰
- ç¤ºä¾‹ï¼š`æŸ¥æ‰¾æ‰€æœ‰ .java æ–‡ä»¶`

**Grep**
- åŠŸèƒ½ï¼šæœç´¢æ–‡ä»¶å†…å®¹
- å‚æ•°ï¼š
  - `pattern`: æœç´¢æ¨¡å¼ï¼ˆå¿…éœ€ï¼‰
  - `path`: æœç´¢è·¯å¾„ï¼ˆå¯é€‰ï¼‰
- ç¤ºä¾‹ï¼š`æœç´¢åŒ…å« TODO çš„æ–‡ä»¶`

#### Shell å·¥å…·

**Bash**
- åŠŸèƒ½ï¼šæ‰§è¡Œ Shell å‘½ä»¤
- å‚æ•°ï¼š
  - `command`: Shell å‘½ä»¤ï¼ˆå¿…éœ€ï¼‰
  - `timeout`: è¶…æ—¶æ—¶é—´ï¼ˆå¯é€‰ï¼Œé»˜è®¤ 30 ç§’ï¼‰
- ç¤ºä¾‹ï¼š`æ‰§è¡Œ mvn clean package`

#### ç½‘ç»œå·¥å…·

**FetchURL**
- åŠŸèƒ½ï¼šè·å–ç½‘é¡µå†…å®¹
- å‚æ•°ï¼š
  - `url`: URL åœ°å€ï¼ˆå¿…éœ€ï¼‰
- ç¤ºä¾‹ï¼š`è·å– https://example.com çš„å†…å®¹`

**SearchWeb**
- åŠŸèƒ½ï¼šæœç´¢ç½‘ç»œ
- å‚æ•°ï¼š
  - `query`: æœç´¢æŸ¥è¯¢ï¼ˆå¿…éœ€ï¼‰
- ç¤ºä¾‹ï¼š`æœç´¢"Spring Boot æœ€ä½³å®è·µ"`

#### å…¶ä»–å·¥å…·

**Think**
- åŠŸèƒ½ï¼šæ€è€ƒå·¥å…·
- å‚æ•°ï¼š
  - `content`: æ€è€ƒå†…å®¹ï¼ˆå¿…éœ€ï¼‰
- ç¤ºä¾‹ï¼š`æ€è€ƒå¦‚ä½•ä¼˜åŒ–è¿™ä¸ªç®—æ³•`

**SetTodoList**
- åŠŸèƒ½ï¼šè®¾ç½®å¾…åŠåˆ—è¡¨
- å‚æ•°ï¼š
  - `tasks`: ä»»åŠ¡åˆ—è¡¨ï¼ˆå¿…éœ€ï¼‰
- ç¤ºä¾‹ï¼š`åˆ›å»ºå¾…åŠåˆ—è¡¨`

**Task**
- åŠŸèƒ½ï¼šå­ Agent ä»»åŠ¡å§”æ‰˜
- å‚æ•°ï¼š
  - `agent`: Agent åç§°ï¼ˆå¿…éœ€ï¼‰
  - `task`: ä»»åŠ¡æè¿°ï¼ˆå¿…éœ€ï¼‰
- ç¤ºä¾‹ï¼š`ä½¿ç”¨è®¾è®¡ Agent è®¾è®¡è®¢å•æ¨¡å—`

### é™„å½• Cï¼šé…ç½®æ¨¡æ¿

#### å®Œæ•´é…ç½®ç¤ºä¾‹

```json
{
  "default_model": "qwen-max",
  "providers": {
    "qwen": {
      "type": "qwen",
      "base_url": "https://dashscope.aliyuncs.com/compatible-mode/v1",
      "api_key": "your-qwen-api-key",
      "custom_headers": {}
    },
    "kimi": {
      "type": "kimi",
      "base_url": "https://api.moonshot.cn/v1",
      "api_key": "your-kimi-api-key",
      "custom_headers": {}
    },
    "deepseek": {
      "type": "deepseek",
      "base_url": "https://api.deepseek.com/v1",
      "api_key": "your-deepseek-api-key",
      "custom_headers": {}
    },
    "ollama": {
      "type": "ollama",
      "base_url": "http://localhost:11434/v1",
      "api_key": "",
      "custom_headers": {}
    },
    "openai": {
      "type": "openai",
      "base_url": "https://api.openai.com/v1",
      "api_key": "your-openai-api-key",
      "custom_headers": {}
    },
    "claude": {
      "type": "claude",
      "base_url": "https://api.anthropic.com/v1",
      "api_key": "your-claude-api-key",
      "custom_headers": {
        "anthropic-version": "2023-06-01"
      }
    }
  },
  "models": {
    "qwen-max": {
      "provider": "qwen",
      "model": "qwen-max",
      "max_context_size": 200000
    },
    "qwen3-coder-plus": {
      "provider": "qwen",
      "model": "qwen3-coder-plus",
      "max_context_size": 200000
    },
    "moonshot-v1-8k": {
      "provider": "kimi",
      "model": "moonshot-v1-8k",
      "max_context_size": 8000
    },
    "deepseek-v3.2": {
      "provider": "deepseek",
      "model": "deepseek-v3.2-exp",
      "max_context_size": 200000
    },
    "qwen3-local": {
      "provider": "ollama",
      "model": "qwen3:4b-instruct-2507-q8_0",
      "max_context_size": 8000
    },
    "gpt-4": {
      "provider": "openai",
      "model": "gpt-4",
      "max_context_size": 8192
    },
    "claude-3-5-sonnet": {
      "provider": "claude",
      "model": "claude-3-5-sonnet-20241022",
      "max_context_size": 200000
    }
  },
  "loop_control": {
    "max_steps_per_run": 50,
    "max_retries_per_step": 10
  },
  "features": {
    "enableSkills": true,
    "enableApproval": false,
    "enableYoloMode": false
  }
}
```

### é™„å½• Dï¼šAgent é…ç½®æ¨¡æ¿

```yaml
name: Agent Name
description: Agent æè¿°

# ç³»ç»Ÿæç¤ºè¯æ–‡ä»¶
system_prompt: system_prompt.md

# ç³»ç»Ÿæç¤ºè¯å‚æ•°
system_prompt_args:
  CUSTOM_ARG: "value"

# æŒ‡å®šæ¨¡å‹ï¼ˆå¯é€‰ï¼‰
model: qwen3-max

# å¯ç”¨å·¥å…·åˆ—è¡¨
tools:
  - ReadFile
  - WriteFile
  - StrReplaceFile
  - PatchFile
  - Glob
  - Grep
  - Bash
  - FetchURL
  - SearchWeb
  - Think
  - SetTodoList
  - Task

# æ’é™¤å·¥å…·ï¼ˆå¯é€‰ï¼‰
exclude_tools:
  - DangerousTool

# å­ Agentï¼ˆå¯é€‰ï¼‰
subagents:
  design:
    path: design/agent.yaml
    description: è®¾è®¡ä»»åŠ¡
  code:
    path: code/agent.yaml
    description: ç¼–ç ä»»åŠ¡
  review:
    path: review/agent.yaml
    description: å®¡æŸ¥ä»»åŠ¡
```

### é™„å½• Eï¼šå¸¸ç”¨è„šæœ¬

#### åˆ›å»ºå¯åŠ¨åˆ«å

```bash
# æ·»åŠ åˆ° ~/.zshrc æˆ– ~/.bash_profile

# Jimi åˆ«å
export JIMI_HOME="/path/to/Jimi"
alias jimi='$JIMI_HOME/scripts/start.sh'
alias jimi-build='$JIMI_HOME/scripts/build.sh'
alias jimi-config='$JIMI_HOME/scripts/init-config.sh'
alias jimi-yolo='$JIMI_HOME/scripts/start.sh --yolo'
alias jimi-design='$JIMI_HOME/scripts/start.sh --agent design'
alias jimi-code='$JIMI_HOME/scripts/start.sh --agent code'
alias jimi-review='$JIMI_HOME/scripts/start.sh --agent review'
```

#### å¿«é€Ÿåˆ‡æ¢é…ç½®

```bash
#!/bin/bash
# ä¿å­˜ä¸º ~/.jimi/switch-config.sh

CONFIG_DIR="$HOME/.jimi"

case "$1" in
  dev)
    ln -sf $CONFIG_DIR/config-dev.json $CONFIG_DIR/config.json
    echo "åˆ‡æ¢åˆ°å¼€å‘ç¯å¢ƒé…ç½®"
    ;;
  prod)
    ln -sf $CONFIG_DIR/config-prod.json $CONFIG_DIR/config.json
    echo "åˆ‡æ¢åˆ°ç”Ÿäº§ç¯å¢ƒé…ç½®"
    ;;
  *)
    echo "ç”¨æ³•: $0 {dev|prod}"
    exit 1
    ;;
esac
```

ä½¿ç”¨ï¼š
```bash
~/.jimi/switch-config.sh dev
~/.jimi/switch-config.sh prod
```

### é™„å½• Fï¼šæœ¯è¯­è¡¨

| æœ¯è¯­ | è¯´æ˜ |
|------|------|
| Agent | æ™ºèƒ½ä»£ç†ï¼Œè´Ÿè´£ç‰¹å®šé¢†åŸŸçš„ä»»åŠ¡å¤„ç† |
| Tool | å·¥å…·ï¼Œæ‰§è¡Œå…·ä½“æ“ä½œçš„ç»„ä»¶ |
| LLM | Large Language Modelï¼Œå¤§è¯­è¨€æ¨¡å‹ |
| Provider | æä¾›å•†ï¼ŒLLM æœåŠ¡æä¾›å•† |
| Skill | æŠ€èƒ½ï¼Œé¢†åŸŸçŸ¥è¯†æ¨¡å— |
| MCP | Model Context Protocolï¼Œæ¨¡å‹ä¸Šä¸‹æ–‡åè®® |
| YOLO | You Only Live Onceï¼Œè‡ªåŠ¨æ‰¹å‡†æ‰€æœ‰æ“ä½œçš„æ¨¡å¼ |
| Context | ä¸Šä¸‹æ–‡ï¼Œå¯¹è¯å†å²å’ŒçŠ¶æ€ |
| Session | ä¼šè¯ï¼Œä¸€æ¬¡å®Œæ•´çš„äº¤äº’è¿‡ç¨‹ |
| Token | ä»¤ç‰Œï¼ŒLLM å¤„ç†çš„æœ€å°å•ä½ |
| Compaction | å‹ç¼©ï¼Œä¸Šä¸‹æ–‡å‹ç¼© |
| Runtime | è¿è¡Œæ—¶ï¼Œæ‰§è¡Œç¯å¢ƒ |

### é™„å½• Gï¼šæ›´æ–°æ—¥å¿—

#### v0.1.0 (2025-01-12)

**æ–°ç‰¹æ€§**
- ğŸ‰ é¦–æ¬¡å‘å¸ƒ
- ğŸ¤– å¤š Agent æ”¯æŒï¼ˆ10 ä¸ªå†…ç½® Agentï¼‰
- ğŸ› ï¸ ä¸°å¯Œçš„å·¥å…·ç³»ç»Ÿï¼ˆ13 ä¸ªå·¥å…·ï¼‰
- ğŸ§© Skills ç³»ç»Ÿ
- ğŸ”Œ å¤š LLM æä¾›å•†æ”¯æŒ
- ğŸŒ MCP åè®®é›†æˆ
- ğŸ” å®¡æ‰¹æœºåˆ¶å’Œ YOLO æ¨¡å¼
- ğŸ“¦ ä¸€é”®å®‰è£…è„šæœ¬

**æŠ€æœ¯æ ˆ**
- Java 17
- Spring Boot 3.2.5
- Reactor WebFlux
- JLine 3.25.1

### é™„å½• Hï¼šå¸¸è§ä»»åŠ¡ç¤ºä¾‹

#### ç¤ºä¾‹ 1ï¼šåˆ†æé¡¹ç›®ç»“æ„

```
è¯·å¸®æˆ‘åˆ†æè¿™ä¸ª Java é¡¹ç›®çš„ç»“æ„ï¼ŒåŒ…æ‹¬ï¼š
1. é¡¹ç›®ä½¿ç”¨çš„æŠ€æœ¯æ ˆ
2. ä¸»è¦çš„æ¨¡å—åˆ’åˆ†
3. æ ¸å¿ƒç±»å’Œæ¥å£
4. è®¾è®¡æ¨¡å¼çš„ä½¿ç”¨
```

#### ç¤ºä¾‹ 2ï¼šä»£ç å®¡æŸ¥

```
è¯·å®¡æŸ¥ src/main/java/io/leavesfly/jimi/engine/JimiEngine.javaï¼Œ
é‡ç‚¹å…³æ³¨ï¼š
1. ä»£ç è´¨é‡
2. æ½œåœ¨çš„ bug
3. æ€§èƒ½é—®é¢˜
4. æœ€ä½³å®è·µ
```

#### ç¤ºä¾‹ 3ï¼šé‡æ„ä»£ç 

```
è¯·å¸®æˆ‘é‡æ„ UserService.javaï¼Œç›®æ ‡ï¼š
1. æå–é‡å¤ä»£ç 
2. ç®€åŒ–æ–¹æ³•
3. æ”¹å–„å‘½å
4. æ·»åŠ æ³¨é‡Š
```

#### ç¤ºä¾‹ 4ï¼šç”Ÿæˆå•å…ƒæµ‹è¯•

```
è¯·ä¸º OrderService.java ç”Ÿæˆå•å…ƒæµ‹è¯•ï¼Œ
è¦æ±‚ï¼š
1. è¦†ç›–æ‰€æœ‰å…¬å…±æ–¹æ³•
2. åŒ…å«æ­£å¸¸å’Œå¼‚å¸¸åœºæ™¯
3. ä½¿ç”¨ JUnit 5 å’Œ Mockito
```

#### ç¤ºä¾‹ 5ï¼šè®¾è®¡ç³»ç»Ÿæ¶æ„

```
è¯·ä½¿ç”¨è®¾è®¡ Agent å¸®æˆ‘è®¾è®¡ä¸€ä¸ªç”µå•†ç³»ç»Ÿï¼ŒåŒ…æ‹¬ï¼š
1. ç³»ç»Ÿæ¶æ„å›¾
2. æ ¸å¿ƒæ¨¡å—åˆ’åˆ†
3. æ•°æ®åº“è®¾è®¡
4. API æ¥å£è®¾è®¡
5. æŠ€æœ¯é€‰å‹
```

#### ç¤ºä¾‹ 6ï¼šä¿®å¤ç¼–è¯‘é”™è¯¯

```
è¯·ä½¿ç”¨æ„å»º Agent å¸®æˆ‘ä¿®å¤ç¼–è¯‘é”™è¯¯ï¼Œ
é¡¹ç›®åœ¨ mvn clean package æ—¶æŠ¥é”™
```

#### ç¤ºä¾‹ 7ï¼šè¿è¡Œæµ‹è¯•

```
è¯·ä½¿ç”¨æµ‹è¯• Agent è¿è¡Œå•å…ƒæµ‹è¯•ï¼Œ
å¹¶åˆ†æå¤±è´¥çš„æµ‹è¯•ç”¨ä¾‹
```

#### ç¤ºä¾‹ 8ï¼šç”Ÿæˆæ–‡æ¡£

```
è¯·ä½¿ç”¨æ–‡æ¡£ Agent ä¸ºè¿™ä¸ªé¡¹ç›®ç”Ÿæˆ README.mdï¼Œ
åŒ…æ‹¬ï¼š
1. é¡¹ç›®ä»‹ç»
2. å®‰è£…è¯´æ˜
3. ä½¿ç”¨æŒ‡å—
4. API æ–‡æ¡£
```

---

## ç»“è¯­

æ„Ÿè°¢ä½¿ç”¨ Jimiï¼

Jimi æ˜¯ä¸€ä¸ªå¼€æºé¡¹ç›®ï¼Œæˆ‘ä»¬æ¬¢è¿ä½ çš„è´¡çŒ®å’Œåé¦ˆã€‚å¦‚æœä½ åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­é‡åˆ°é—®é¢˜æˆ–æœ‰æ”¹è¿›å»ºè®®ï¼Œ
è¯·é€šè¿‡ GitHub Issues æˆ– Discussions å‘Šè¯‰æˆ‘ä»¬ã€‚

**é¡¹ç›®åœ°å€**
- GitHub: https://github.com/your-repository/Jimi
- æ–‡æ¡£: https://github.com/your-repository/Jimi/docs

**ç¤¾åŒº**
- Issues: https://github.com/your-repository/Jimi/issues
- Discussions: https://github.com/your-repository/Jimi/discussions

**è´¡çŒ®**
æˆ‘ä»¬æ¬¢è¿ä»¥ä¸‹ç±»å‹çš„è´¡çŒ®ï¼š
- ğŸ› Bug ä¿®å¤
- âœ¨ æ–°åŠŸèƒ½å¼€å‘
- ğŸ“ æ–‡æ¡£æ”¹è¿›
- ğŸ¨ ä»£ç é‡æ„
- âš¡ æ€§èƒ½ä¼˜åŒ–
- âœ… æµ‹è¯•ç”¨ä¾‹è¡¥å……

**è®¸å¯è¯**
æœ¬é¡¹ç›®é‡‡ç”¨ Apache License 2.0 è®¸å¯è¯ã€‚

---

**Happy Coding with Jimi! ğŸ‰**

*æœ€åæ›´æ–°ï¼š2025-01-12*
