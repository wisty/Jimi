# Jimiï¼šæ‰“é€ Javaç¨‹åºå‘˜ä¸“å±çš„å¼€æºClaudeCode

> ä½œè€…ï¼šå±±æ³½
> 
> ä¸€ä¸ªå®Œå…¨ç”¨Javaå®ç°çš„AIé©±åŠ¨CLIæ™ºèƒ½ä»£ç†ç³»ç»Ÿï¼Œä¸ºJavaå¼€å‘è€…å¸¦æ¥å¯æ·±åº¦å®šåˆ¶çš„ç±»ClaudeCodeå¼€æºã€‚

## å¼•è¨€ï¼šä¸ºä»€ä¹ˆJavaç¨‹åºå‘˜éœ€è¦è‡ªå·±çš„AIä»£ç†ï¼Ÿ

åœ¨AIè¾…åŠ©ç¼–ç¨‹çš„æµªæ½®ä¸­ï¼ŒCursorã€Claude Codeç­‰å·¥å…·ä¸ºå¼€å‘è€…å¸¦æ¥äº†é©å‘½æ€§çš„ä½“éªŒã€‚ä½†å¯¹äºJavaç”Ÿæ€çš„å¼€å‘è€…æ¥è¯´ï¼Œæˆ‘ä»¬é¢ä¸´ç€ä¸€äº›ç‹¬ç‰¹çš„æŒ‘æˆ˜ï¼š

- ğŸ”§ **æŠ€æœ¯æ ˆå‰²è£‚**ï¼šä¸»æµAIå·¥å…·å¤šç”¨Pythonå®ç°ï¼Œä¸Javaé¡¹ç›®é›†æˆå›°éš¾
- ğŸ“š **ä¼ä¸šçº§éœ€æ±‚**ï¼šéœ€è¦æ”¯æŒSpring Bootã€Mavenã€å¾®æœåŠ¡ç­‰ä¼ä¸šçº§æ¡†æ¶
- ğŸ” **ç§æœ‰åŒ–éƒ¨ç½²**ï¼šä¼ä¸šå¯¹ä»£ç å®‰å…¨æœ‰ä¸¥æ ¼è¦æ±‚ï¼Œéœ€è¦å¯æ§çš„æœ¬åœ°æ–¹æ¡ˆ
- ğŸ¯ **æ·±åº¦å®šåˆ¶**ï¼šå¸Œæœ›èƒ½æ·±å…¥ç†è§£å¹¶å®šåˆ¶AIä»£ç†çš„è¡Œä¸ºé€»è¾‘

**Jimié¡¹ç›®çš„è¯ç”Ÿæ­£æ˜¯ä¸ºäº†è§£å†³è¿™äº›ç—›ç‚¹**â€”â€”ç”¨çº¯JavaæŠ€æœ¯æ ˆï¼Œä»é›¶æ„å»ºä¸€ä¸ªåŠŸèƒ½å®Œæ•´ã€å¯æ‰©å±•ã€ä¼ä¸šçº§çš„AIæ™ºèƒ½ä»£ç†ç³»ç»Ÿã€‚

### Jimiçš„æ ¸å¿ƒä»·å€¼

- **ğŸ“ æ•™è‚²å‹å¥½**ï¼šæ¸…æ™°çš„ä»£ç æ¶æ„ï¼Œå®Œæ•´çš„ä¸­æ–‡æ³¨é‡Šï¼Œè®©æ¯ä¸€è¡Œä»£ç éƒ½èƒ½æˆä¸ºå­¦ä¹ èµ„æº
- **ğŸ¢ ä¼ä¸šçº§è®¾è®¡**ï¼šåŸºäºSpring Boot 3.2.5ï¼Œæ”¯æŒå“åº”å¼ç¼–ç¨‹ï¼Œç”Ÿäº§çº§è´¨é‡ä¿è¯
- **ğŸ”Œ å¼€æ”¾ç”Ÿæ€**ï¼šæ”¯æŒMCPåè®®ï¼Œå¯é›†æˆå„ç±»å¤–éƒ¨å·¥å…·å’ŒæœåŠ¡
- **ğŸ§© æè‡´æ¨¡å—åŒ–**ï¼šåƒæ­ä¹é«˜ä¸€æ ·ç»„åˆåŠŸèƒ½ï¼Œæ¯ä¸ªæ¨¡å—èŒè´£æ˜ç¡®ï¼Œæ˜“äºæ‰©å±•
- **ğŸ’¡ çŸ¥è¯†æ³¨å…¥**ï¼šçµæ´»çš„Skillsç³»ç»Ÿï¼Œè®©AIå¯ä»¥æŒ‰éœ€è·å–é¢†åŸŸä¸“ä¸šçŸ¥è¯†

## ç¬¬ä¸€ç« ï¼šæ¶æ„ä¹‹ç¾â€”â€”åˆ†å±‚è®¾è®¡çš„æ™ºæ…§

### 1.1 ä»"ç§¯æœ¨"çš„è§’åº¦ç†è§£Jimi

æƒ³è±¡ä¸€ä¸‹ï¼Œå¦‚æœè¦å»ºé€ ä¸€åº§æ™ºèƒ½å¤§å¦ï¼Œæˆ‘ä»¬éœ€è¦ä»€ä¹ˆï¼Ÿé¦–å…ˆæ˜¯åšå®çš„åœ°åŸºï¼ˆåŸºç¡€è®¾æ–½ï¼‰ï¼Œç„¶åæ˜¯ç¨³å®šçš„éª¨æ¶ï¼ˆæ ¸å¿ƒå¼•æ“ï¼‰ï¼Œå†æ˜¯çµæ´»çš„åŠŸèƒ½æ¨¡å—ï¼ˆAgentå’Œå·¥å…·ï¼‰ï¼Œæœ€åæ˜¯å‹å¥½çš„äº¤äº’ç•Œé¢ï¼ˆUIï¼‰ã€‚Jimiçš„æ¶æ„è®¾è®¡æ­£æ˜¯éµå¾ªäº†è¿™æ ·çš„æ€è·¯ï¼š

```mermaid
graph TB
    subgraph "ğŸ¨ äº¤äº’å±‚"
        CLI[JLine Shell UI]
        Wire[Wireæ¶ˆæ¯æ€»çº¿]
    end
    
    subgraph "ğŸ§  æ ¸å¿ƒå¼•æ“å±‚"
        Engine[JimiEngine<br/>å¼•æ“é—¨é¢]
        Executor[AgentExecutor<br/>æ‰§è¡Œå™¨]
        Context[ExecutionContext<br/>ä¸Šä¸‹æ–‡ç®¡ç†]
        Approval[å®¡æ‰¹æœºåˆ¶]
        Compaction[ä¸Šä¸‹æ–‡å‹ç¼©]
    end
    
    subgraph "ğŸ¤– æ™ºèƒ½ä»£ç†å±‚"
        AgentRegistry[Agentæ³¨å†Œè¡¨]
        DefaultAgent[é»˜è®¤Agent]
        SpecializedAgents[ä¸“ä¸šAgent<br/>è®¾è®¡/ç¼–ç /å®¡æŸ¥/æµ‹è¯•]
        CustomAgent[è‡ªå®šä¹‰Agent]
    end
    
    subgraph "ğŸ”§ å·¥å…·ç³»ç»Ÿå±‚"
        ToolRegistry[å·¥å…·æ³¨å†Œè¡¨]
        FileTools[æ–‡ä»¶å·¥å…·]
        BashTools[Shellå·¥å…·]
        WebTools[ç½‘ç»œå·¥å…·]
        MCPTools[MCPå¤–éƒ¨å·¥å…·]
        TaskTools[å­Agentä»»åŠ¡å§”æ‰˜]
    end
    
    subgraph "ğŸ§© SkillsçŸ¥è¯†å±‚"
        SkillRegistry[Skillsæ³¨å†Œè¡¨]
        SkillMatcher[æ™ºèƒ½åŒ¹é…å™¨]
        SkillProvider[çŸ¥è¯†æ³¨å…¥å™¨]
    end
    
    subgraph "ğŸŒ LLMé›†æˆå±‚"
        LLMFactory[LLMå·¥å‚]
        ChatProvider[èŠå¤©æä¾›å•†]
        MultiModels[å¤šæ¨¡å‹æ”¯æŒ<br/>OpenAI/Kimi/DeepSeek/Qwen]
    end
    
    CLI --> Wire
    Wire --> Engine
    Engine --> Executor
    Executor --> Context
    Executor --> AgentRegistry
    Executor --> ToolRegistry
    Executor --> LLMFactory
    Executor --> SkillMatcher
    Engine --> Approval
    Engine --> Compaction
    AgentRegistry --> DefaultAgent
    AgentRegistry --> SpecializedAgents
    AgentRegistry --> CustomAgent
    ToolRegistry --> FileTools
    ToolRegistry --> BashTools
    ToolRegistry --> WebTools
    ToolRegistry --> MCPTools
    ToolRegistry --> TaskTools
    SkillMatcher --> SkillRegistry
    SkillRegistry --> SkillProvider
    SkillProvider --> Context
    LLMFactory --> ChatProvider
    ChatProvider --> MultiModels
```

è¿™ç§åˆ†å±‚è®¾è®¡å¸¦æ¥äº†æ˜¾è‘—çš„ä¼˜åŠ¿ï¼š

- **ğŸ”’ åº•å±‚ç¨³å®š**ï¼šæ¶ˆæ¯æ€»çº¿å’Œæ‰§è¡Œå¼•æ“ä¸ºæ•´ä¸ªç³»ç»Ÿæä¾›å¯é åŸºç¡€
- **ğŸ¯ ä¸­å±‚çµæ´»**ï¼šAgentå’Œå·¥å…·ç³»ç»Ÿæä¾›ä¸°å¯Œçš„åŠŸèƒ½ç»„ä»¶
- **ğŸš€ ä¸Šå±‚å¼€æ”¾**ï¼šæ”¯æŒå¤šç§LLMã€è‡ªå®šä¹‰Agentã€å¤–éƒ¨å·¥å…·é›†æˆ

### 1.2 æ ¸å¿ƒæ¨¡å—ä¸€è§ˆ

Jimiå…±åŒ…å«8ä¸ªæ ¸å¿ƒåŠŸèƒ½åŸŸï¼Œæ¯ä¸ªåŸŸéƒ½æœ‰æ˜ç¡®çš„èŒè´£è¾¹ç•Œï¼š

| åŠŸèƒ½åŸŸ | æ ¸å¿ƒæ¨¡å— | ä¸»è¦èŒè´£ | è®¾è®¡äº®ç‚¹ |
|--------|---------|---------|---------|
| **æ ¸å¿ƒå¼•æ“** | `JimiEngine`<br/>`AgentExecutor` | ä»»åŠ¡æ‰§è¡Œä¸è°ƒåº¦ | å§”æ‰˜æ¨¡å¼ï¼Œå•ä¸€èŒè´£ |
| **Agentç³»ç»Ÿ** | `AgentRegistry`<br/>`AgentSpecLoader` | Agentç®¡ç†ä¸åŠ è½½ | YAMLé…ç½®åŒ–ï¼Œæ¨¡æ¿æ¸²æŸ“ |
| **å·¥å…·ç³»ç»Ÿ** | `ToolRegistry`<br/>`ToolRegistryFactory` | å·¥å…·æ³¨å†Œä¸æ‰§è¡Œ | Springé›†æˆï¼Œæ’ä»¶åŒ– |
| **LLMé›†æˆ** | `LLMFactory`<br/>`ChatProvider` | å¤šæ¨¡å‹æ”¯æŒ | Caffeineç¼“å­˜ï¼Œæµå¼å“åº” |
| **Skillsç³»ç»Ÿ** | `SkillMatcher`<br/>`SkillProvider` | çŸ¥è¯†æ™ºèƒ½æ³¨å…¥ | å…³é”®è¯åŒ¹é…ï¼Œè‡ªåŠ¨æ¿€æ´» |
| **æ¶ˆæ¯æ€»çº¿** | `Wire`<br/>`WireMessage` | ç»„ä»¶è§£è€¦é€šä¿¡ | å“åº”å¼æµï¼Œäº‹ä»¶é©±åŠ¨ |
| **ä¼šè¯ç®¡ç†** | `Session`<br/>`Context` | ä¸Šä¸‹æ–‡æŒä¹…åŒ– | æ£€æŸ¥ç‚¹æœºåˆ¶ï¼Œæ™ºèƒ½å‹ç¼© |
| **UIäº¤äº’** | `ShellUI`<br/>`OutputFormatter` | å‘½ä»¤è¡Œç•Œé¢ | JLine3ï¼Œå½©è‰²è¾“å‡º |

## ç¬¬äºŒç« ï¼šæ ¸å¿ƒå¼•æ“â€”â€”Agentæ‰§è¡Œçš„"å¿ƒè„"

### 2.1 è®¾è®¡ç†å¿µï¼šå§”æ‰˜ä¸è§£è€¦

åœ¨æ—©æœŸç‰ˆæœ¬ä¸­ï¼Œ`JimiEngine`æ‰¿æ‹…äº†è¿‡å¤šçš„èŒè´£ï¼ˆæ‰§è¡Œå¾ªç¯ã€å·¥å…·è°ƒç”¨ã€ä¸Šä¸‹æ–‡ç®¡ç†ç­‰ï¼‰ï¼Œå¯¼è‡´ä»£ç å¤æ‚åº¦é«˜ã€éš¾ä»¥æµ‹è¯•ã€‚ç»è¿‡é‡æ„ï¼Œæˆ‘ä»¬é‡‡ç”¨äº†**å§”æ‰˜æ¨¡å¼**ï¼š

- **JimiEngine**ï¼šä½œä¸ºEngineæ¥å£çš„å®ç°ï¼Œä¸“æ³¨äº**ç»„ä»¶è£…é…å’Œåè°ƒ**
- **AgentExecutor**ï¼šæ‰¿æ‹…**ä¸»å¾ªç¯è°ƒåº¦å’Œæ‰§è¡Œé€»è¾‘**ï¼Œæ˜¯çœŸæ­£çš„"å¼•æ“å¿ƒè„"

```mermaid
sequenceDiagram
    participant UI as ShellUI
    participant Engine as JimiEngine
    participant Executor as AgentExecutor
    participant LLM as LLM Provider
    participant Tool as Tool System
    participant Context as Context
    
    UI->>Engine: run(userInput)
    Note over Engine: 1. æ£€æŸ¥LLMæ˜¯å¦è®¾ç½®
    Engine->>Executor: execute(userInput)
    
    Executor->>Context: åˆ›å»ºæ£€æŸ¥ç‚¹0
    Executor->>Context: æ·»åŠ ç”¨æˆ·æ¶ˆæ¯
    
    loop Agentä¸»å¾ªç¯
        Executor->>Executor: agentLoopStep(stepNo)
        Note over Executor: 2. æ£€æŸ¥æœ€å¤§æ­¥æ•°é™åˆ¶
        Note over Executor: 3. è§¦å‘ä¸Šä¸‹æ–‡å‹ç¼©ï¼ˆå¦‚éœ€è¦ï¼‰
        Note over Executor: 4. åŒ¹é…å¹¶æ³¨å…¥Skills
        
        Executor->>LLM: å‘é€æ¶ˆæ¯å’Œå·¥å…·å®šä¹‰
        LLM-->>Executor: æµå¼è¿”å›å“åº”
        
        alt åŒ…å«å·¥å…·è°ƒç”¨
            Executor->>Tool: å¹¶å‘æ‰§è¡Œå·¥å…·
            Tool-->>Executor: è¿”å›å·¥å…·ç»“æœ
            Executor->>Context: æ·»åŠ å·¥å…·ç»“æœ
            Note over Executor: ç»§ç»­ä¸‹ä¸€æ­¥
        else çº¯æ–‡æœ¬å“åº”
            Note over Executor: å¾ªç¯ç»“æŸ
        end
    end
    
    Executor-->>Engine: æ‰§è¡Œå®Œæˆ
    Engine-->>UI: è¿”å›ç»“æœ
```

### 2.2 æ ¸å¿ƒä»£ç è§£æ

è®©æˆ‘ä»¬æ·±å…¥`AgentExecutor`çš„æ ¸å¿ƒé€»è¾‘ï¼Œçœ‹çœ‹å®ƒæ˜¯å¦‚ä½•åè°ƒå„ä¸ªç»„ä»¶çš„ï¼š

```java
@Slf4j
public class AgentExecutor {
    
    private final Agent agent;
    private final Runtime runtime;
    private final Context context;
    private final Wire wire;
    private final ToolRegistry toolRegistry;
    private final Compaction compaction;
    private final SkillMatcher skillMatcher;
    private final SkillProvider skillProvider;
    
    /**
     * æ‰§è¡Œ Agent ä»»åŠ¡çš„å…¥å£æ–¹æ³•
     */
    public Mono<Void> execute(List<ContentPart> userInput) {
        return Mono.defer(() -> {
            // 1. åˆ›å»ºæ£€æŸ¥ç‚¹ 0ï¼ˆåˆå§‹çŠ¶æ€ï¼‰
            return context.checkpoint(false)
                    // 2. æ·»åŠ ç”¨æˆ·æ¶ˆæ¯åˆ°ä¸Šä¸‹æ–‡
                    .flatMap(checkpointId -> context.appendMessage(Message.user(userInput)))
                    // 3. å¯åŠ¨Agentä¸»å¾ªç¯
                    .then(agentLoop())
                    .doOnSuccess(v -> log.info("Agent execution completed"))
                    .doOnError(e -> log.error("Agent execution failed", e));
        });
    }
    
    /**
     * Agent ä¸»å¾ªç¯çš„å•æ­¥æ‰§è¡Œ
     */
    private Mono<Void> agentLoopStep(int stepNo) {
        // æ£€æŸ¥æ˜¯å¦è¶…è¿‡æœ€å¤§æ­¥æ•°é™åˆ¶
        int maxSteps = runtime.getConfig().getLoopControl().getMaxStepsPerRun();
        if (stepNo > maxSteps) {
            return Mono.error(new MaxStepsReachedException(maxSteps));
        }
        
        // å‘é€æ­¥éª¤å¼€å§‹æ¶ˆæ¯ï¼ˆé€šè¿‡Wireé€šçŸ¥UIï¼‰
        wire.send(new StepBegin(stepNo, isSubagent, agentName));
        
        return Mono.defer(() -> {
            // 1. æ£€æŸ¥ä¸Šä¸‹æ–‡æ˜¯å¦è¶…é™ï¼Œå¿…è¦æ—¶è§¦å‘å‹ç¼©
            return checkAndCompactContext()
                    // 2. åˆ›å»ºæ­¥éª¤æ£€æŸ¥ç‚¹
                    .then(context.checkpoint(true))
                    // 3. åŒ¹é…å¹¶æ³¨å…¥Skillsï¼ˆæ™ºèƒ½çŸ¥è¯†æ³¨å…¥ï¼‰
                    .then(matchAndInjectSkills(stepNo))
                    // 4. æ‰§è¡Œå•æ­¥ï¼šè°ƒç”¨LLMå¹¶å¤„ç†å“åº”
                    .then(step())
                    .flatMap(finished -> {
                        if (finished) {
                            // LLMè¿”å›çº¯æ–‡æœ¬ï¼Œæ²¡æœ‰å·¥å…·è°ƒç”¨ï¼Œå¾ªç¯ç»“æŸ
                            log.info("Agent loop finished at step {}", stepNo);
                            return Mono.empty();
                        } else {
                            // æœ‰å·¥å…·è°ƒç”¨ï¼Œç»§ç»­ä¸‹ä¸€æ­¥
                            return agentLoopStep(stepNo + 1);
                        }
                    });
        });
    }
}
```

**è®¾è®¡äº®ç‚¹**ï¼š

1. **å“åº”å¼ç¼–ç¨‹**ï¼šä½¿ç”¨Reactorçš„`Mono`ï¼Œå¤©ç„¶æ”¯æŒå¼‚æ­¥éé˜»å¡
2. **æ£€æŸ¥ç‚¹æœºåˆ¶**ï¼šæ¯ä¸ªæ­¥éª¤åˆ›å»ºæ£€æŸ¥ç‚¹ï¼Œæ”¯æŒå›æ»šå’Œé”™è¯¯æ¢å¤
3. **æ¶ˆæ¯æ€»çº¿è§£è€¦**ï¼šé€šè¿‡`Wire`å‘é€äº‹ä»¶ï¼ŒUIå±‚æ— éœ€ç›´æ¥è€¦åˆ
4. **æ™ºèƒ½å¾ªç¯æ§åˆ¶**ï¼šæ”¯æŒæœ€å¤§æ­¥æ•°é™åˆ¶ã€è¿ç»­æ— å·¥å…·è°ƒç”¨æ£€æµ‹

### 2.3 æµå¼å“åº”å¤„ç†çš„ç²¾å¦™è®¾è®¡

LLMçš„æµå¼å“åº”ï¼ˆStreamingï¼‰æ˜¯æå‡ç”¨æˆ·ä½“éªŒçš„å…³é”®ã€‚Jimié‡‡ç”¨äº†**ç´¯åŠ å™¨æ¨¡å¼**æ¥å¤„ç†æµå¼æ•°æ®ï¼š

```java
/**
 * æµå¼ç´¯åŠ å™¨ï¼šç”¨äºç»„è£…å®Œæ•´çš„Assistantæ¶ˆæ¯
 */
private static class StreamAccumulator {
    StringBuilder contentBuilder = new StringBuilder();     // ç´¯ç§¯æ–‡æœ¬å†…å®¹
    List<ToolCall> toolCalls = new ArrayList<>();          // ç´¯ç§¯å·¥å…·è°ƒç”¨
    ChatCompletionResult.Usage usage;                      // Tokenä½¿ç”¨ç»Ÿè®¡
    
    // ç”¨äºä¸´æ—¶å­˜å‚¨æ­£åœ¨æ„å»ºçš„å·¥å…·è°ƒç”¨
    String currentToolCallId;
    String currentFunctionName;
    StringBuilder currentArguments = new StringBuilder();
}

/**
 * å¤„ç†æµå¼æ•°æ®å—
 */
private StreamAccumulator processStreamChunk(StreamAccumulator acc, ChatCompletionChunk chunk) {
    switch (chunk.getType()) {
        case CONTENT:
            // æ–‡æœ¬å†…å®¹ï¼šå®æ—¶ç´¯åŠ å¹¶é€šè¿‡Wireå‘é€åˆ°UI
            String contentDelta = chunk.getContentDelta();
            acc.contentBuilder.append(contentDelta);
            wire.send(new ContentPartMessage(new TextPart(contentDelta)));
            break;
            
        case TOOL_CALL:
            // å·¥å…·è°ƒç”¨ï¼šé€å—ç´¯ç§¯å‚æ•°JSON
            handleToolCallChunk(acc, chunk);
            break;
            
        case DONE:
            // æµç»“æŸï¼šè®°å½•Tokenä½¿ç”¨æƒ…å†µ
            acc.usage = chunk.getUsage();
            break;
    }
    return acc;
}
```

**æŠ€æœ¯äº®ç‚¹**ï¼š

- **å®æ—¶åé¦ˆ**ï¼šæ¯ä¸ªå†…å®¹ç‰‡æ®µç«‹å³å‘é€åˆ°UIï¼Œç”¨æˆ·æ„ŸçŸ¥å»¶è¿Ÿæä½
- **å®¹é”™æœºåˆ¶**ï¼šå¤„ç†LLMå¯èƒ½å…ˆå‘é€argumentsã€åå‘é€idçš„å¼‚å¸¸æƒ…å†µ
- **ä¸´æ—¶IDç­–ç•¥**ï¼šå½“æ”¶åˆ°å‚æ•°ä½†æ²¡æœ‰IDæ—¶ï¼Œåˆ›å»ºä¸´æ—¶IDç¡®ä¿æ•°æ®ä¸ä¸¢å¤±

## ç¬¬ä¸‰ç« ï¼šAgentç³»ç»Ÿâ€”â€”ä¸“ä¸šåˆ†å·¥çš„åä½œä¹‹é“

### 3.1 å¤šAgentåä½œæ¶æ„

Jimiæ”¯æŒå¤šç§ä¸“ä¸šåŒ–Agentï¼Œæ¯ä¸ªAgentéƒ½æœ‰æ˜ç¡®çš„èŒè´£è¾¹ç•Œï¼š

```mermaid
graph LR
    subgraph ä¸»Agent
        DefaultAgent[é»˜è®¤Agent<br/>é€šç”¨åŠ©æ‰‹]
    end
    
    subgraph ä¸“ä¸šAgent
        DesignAgent[è®¾è®¡Agent<br/>ğŸ¨éœ€æ±‚åˆ†æ/æ¶æ„è®¾è®¡]
        CodeAgent[ç¼–ç Agent<br/>ğŸ’»ä»£ç å®ç°/é‡æ„]
        ReviewAgent[å®¡æŸ¥Agent<br/>ğŸ”ä»£ç è´¨é‡/å®‰å…¨]
        TestAgent[æµ‹è¯•Agent<br/>ğŸ§ªå•å…ƒæµ‹è¯•/é›†æˆæµ‹è¯•]
        BuildAgent[æ„å»ºAgent<br/>ğŸ“¦Maven/ä¾èµ–ç®¡ç†]
        DebugAgent[è°ƒè¯•Agent<br/>ğŸ›é”™è¯¯è¯Šæ–­/ä¿®å¤]
        DocAgent[æ–‡æ¡£Agent<br/>ğŸ“APIæ–‡æ¡£/README]
    end
    
    DefaultAgent -->|å§”æ‰˜è®¾è®¡ä»»åŠ¡| DesignAgent
    DefaultAgent -->|å§”æ‰˜ç¼–ç ä»»åŠ¡| CodeAgent
    DefaultAgent -->|å§”æ‰˜å®¡æŸ¥ä»»åŠ¡| ReviewAgent
    DefaultAgent -->|å§”æ‰˜æµ‹è¯•ä»»åŠ¡| TestAgent
    DefaultAgent -->|å§”æ‰˜æ„å»ºä»»åŠ¡| BuildAgent
    DefaultAgent -->|å§”æ‰˜è°ƒè¯•ä»»åŠ¡| DebugAgent
    DefaultAgent -->|å§”æ‰˜æ–‡æ¡£ä»»åŠ¡| DocAgent
    
    DesignAgent -.->|è®¾è®¡å®Œæˆ| CodeAgent
    CodeAgent -.->|å®ç°å®Œæˆ| ReviewAgent
    ReviewAgent -.->|å®¡æŸ¥é€šè¿‡| TestAgent
```

### 3.2 Agentçš„é…ç½®åŒ–è®¾è®¡

Jimié‡‡ç”¨**YAMLé…ç½® + Markdownæ¨¡æ¿**çš„æ–¹å¼å®šä¹‰Agentï¼Œæå¤§æå‡äº†å¯å®šåˆ¶æ€§ï¼š

**agent.yamlç¤ºä¾‹**ï¼š

```yaml
name: "Code Agent"
description: "ä¸“ä¸šçš„ä»£ç å®ç°Agent"
model: null  # ç»§æ‰¿é»˜è®¤æ¨¡å‹

# å¯ä»¥å§”æ‰˜çš„å­Agent
subagents:
  - review
  - test

# å¯ç”¨å·¥å…·åˆ—è¡¨
tools:
  - read_file
  - write_to_file
  - str_replace_file
  - patch_file
  - bash
  - glob
  - grep
  - think

# æ’é™¤çš„å·¥å…·ï¼ˆä»æ ‡å‡†å·¥å…·é›†ä¸­ç§»é™¤ï¼‰
exclude_tools:
  - fetch_url
  - set_todo_list

# ç³»ç»Ÿæç¤ºè¯å‚æ•°ï¼ˆç”¨äºæ¨¡æ¿æ¸²æŸ“ï¼‰
system_prompt_args:
  CODING_STYLE: "éµå¾ªé˜¿é‡Œå·´å·´Javaå¼€å‘æ‰‹å†Œ"
  JAVA_VERSION: "17"
```

**system_prompt.mdæ¨¡æ¿**ï¼š

```markdown
# è§’è‰²å®šä½
ä½ æ˜¯ä¸€ä½ç»éªŒä¸°å¯Œçš„Javaé«˜çº§å·¥ç¨‹å¸ˆï¼Œä¸“æ³¨äºé«˜è´¨é‡ä»£ç å®ç°ã€‚

# å·¥ä½œç¯å¢ƒ
- å½“å‰æ—¶é—´: ${JIMI_NOW}
- å·¥ä½œç›®å½•: ${JIMI_WORK_DIR}
- Javaç‰ˆæœ¬: ${JAVA_VERSION}
- ç¼–ç è§„èŒƒ: ${CODING_STYLE}

# æ ¸å¿ƒèƒ½åŠ›
1. æ ¹æ®è®¾è®¡æ–‡æ¡£å®Œæˆä»£ç å®ç°
2. ç¼–å†™ç¬¦åˆè§„èŒƒçš„æ³¨é‡Šå’Œæ–‡æ¡£
3. è¿›è¡Œä»£ç é‡æ„å’Œä¼˜åŒ–
4. å¤„ç†å¼‚å¸¸æƒ…å†µå’Œè¾¹ç•Œæ¡ä»¶

# å·¥ä½œæµç¨‹
1. ä»”ç»†é˜…è¯»éœ€æ±‚å’Œè®¾è®¡æ–‡æ¡£
2. åˆ†æç°æœ‰ä»£ç ç»“æ„
3. å®ç°æ–°åŠŸèƒ½æˆ–ä¿®å¤Bug
4. ç¼–å†™å¿…è¦çš„æ³¨é‡Š
5. å§”æ‰˜Review Agentè¿›è¡Œä»£ç å®¡æŸ¥
```

### 3.3 AgentåŠ è½½ä¸æ¸²æŸ“æœºåˆ¶

`AgentRegistry`è´Ÿè´£Agentçš„åŠ è½½å’Œç®¡ç†ï¼š

```java
@Service
public class AgentRegistry {
    
    @Autowired
    private AgentSpecLoader specLoader;
    
    /**
     * åŠ è½½Agentå®ä¾‹ï¼Œæ”¯æŒæ¨¡æ¿æ¸²æŸ“
     */
    public Mono<Agent> loadAgent(Path agentFile, Runtime runtime) {
        return loadAgentSpec(agentFile).flatMap(spec -> {
            // æ¸²æŸ“ç³»ç»Ÿæç¤ºè¯æ¨¡æ¿
            String systemPrompt = renderSystemPrompt(
                spec.getSystemPromptPath(), 
                spec.getSystemPromptArgs(), 
                runtime.getBuiltinArgs()
            );
            
            // æ„å»ºAgentå®ä¾‹
            Agent agent = Agent.builder()
                .name(spec.getName())
                .systemPrompt(systemPrompt)
                .model(spec.getModel())
                .tools(processedTools)
                .build();
            
            return Mono.just(agent);
        });
    }
    
    /**
     * æ¸²æŸ“ç³»ç»Ÿæç¤ºè¯ï¼ˆä½¿ç”¨Apache Commons Textï¼‰
     */
    private String renderSystemPrompt(Path promptPath, Map<String, String> args, 
                                     BuiltinSystemPromptArgs builtinArgs) {
        String template = Files.readString(promptPath);
        
        // å‡†å¤‡æ›¿æ¢å‚æ•°ï¼ˆå†…ç½®å‚æ•° + è‡ªå®šä¹‰å‚æ•°ï¼‰
        Map<String, String> substitutionMap = new HashMap<>();
        substitutionMap.put("JIMI_NOW", builtinArgs.getJimiNow());
        substitutionMap.put("JIMI_WORK_DIR", builtinArgs.getJimiWorkDir().toString());
        if (args != null) {
            substitutionMap.putAll(args);
        }
        
        // æ‰§è¡Œå­—ç¬¦ä¸²æ›¿æ¢
        StringSubstitutor substitutor = new StringSubstitutor(substitutionMap);
        return substitutor.replace(template);
    }
}
```

**è®¾è®¡ä¼˜åŠ¿**ï¼š

- **é…ç½®ä¸ä»£ç åˆ†ç¦»**ï¼šä¿®æ”¹Agentè¡Œä¸ºæ— éœ€ä¿®æ”¹ä»£ç 
- **æ¨¡æ¿åŒ–**ï¼šæ”¯æŒå‚æ•°æ›¿æ¢ï¼ŒåŠ¨æ€æ³¨å…¥ä¸Šä¸‹æ–‡ä¿¡æ¯
- **å¯æ‰©å±•**ï¼šæ–°å¢Agentåªéœ€æ·»åŠ é…ç½®æ–‡ä»¶

## ç¬¬å››ç« ï¼šå·¥å…·ç³»ç»Ÿâ€”â€”èƒ½åŠ›çš„"ç‘å£«å†›åˆ€"

### 4.1 å·¥å…·æ³¨å†Œä¸æ‰§è¡Œæ¶æ„

Jimiçš„å·¥å…·ç³»ç»Ÿé‡‡ç”¨**æ³¨å†Œè¡¨æ¨¡å¼**ï¼Œæ”¯æŒå·¥å…·çš„åŠ¨æ€æ³¨å†Œå’Œæ‰§è¡Œï¼š

```mermaid
graph TD
    subgraph å·¥å…·æ³¨å†Œæœºåˆ¶
        Factory[ToolRegistryFactory<br/>Spring Service]
        Registry[ToolRegistry<br/>å·¥å…·æ³¨å†Œè¡¨]
        Provider[ToolProvideræ¥å£<br/>å·¥å…·æä¾›è€…]
    end
    
    subgraph å†…ç½®å·¥å…·
        FileTools[æ–‡ä»¶å·¥å…·<br/>ReadFile/WriteFile/PatchFile]
        BashTools[Shellå·¥å…·<br/>RunCommand]
        WebTools[ç½‘ç»œå·¥å…·<br/>FetchURL]
        ThinkTools[æ€è€ƒå·¥å…·<br/>Think]
        TodoTools[å¾…åŠå·¥å…·<br/>ManageTodo]
    end
    
    subgraph å¤–éƒ¨å·¥å…·
        MCPTools[MCPå·¥å…·<br/>åŠ¨æ€åŠ è½½]
        MCPClient[MCPå®¢æˆ·ç«¯<br/>HTTP/StdIO]
    end
    
    Factory -->|åˆ›å»ºå¹¶é…ç½®| Registry
    Provider -->|æ³¨å†Œå·¥å…·| Registry
    
    Registry --> FileTools
    Registry --> BashTools
    Registry --> WebTools
    Registry --> ThinkTools
    Registry --> TodoTools
    Registry --> MCPTools
```

### 4.2 å·¥å…·çš„æ ‡å‡†æ¥å£è®¾è®¡

æ‰€æœ‰å·¥å…·éƒ½å®ç°ç»Ÿä¸€çš„`Tool`æ¥å£ï¼š

```java
public interface Tool<P> {
    
    /**
     * å·¥å…·åç§°ï¼ˆå¯¹åº”LLM function callingçš„nameï¼‰
     */
    String getName();
    
    /**
     * å·¥å…·æè¿°ï¼ˆå‘Šè¯‰LLMè¿™ä¸ªå·¥å…·çš„ç”¨é€”ï¼‰
     */
    String getDescription();
    
    /**
     * å‚æ•°ç±»å‹ï¼ˆç”¨äºJSON Schemaç”Ÿæˆï¼‰
     */
    Class<P> getParamsType();
    
    /**
     * æ‰§è¡Œå·¥å…·
     */
    Mono<ToolResult> execute(P params);
}
```

ä»¥`ReadFile`å·¥å…·ä¸ºä¾‹ï¼š

```java
@Component
@Scope("prototype")  // æ¯æ¬¡è·å–æ—¶åˆ›å»ºæ–°å®ä¾‹
public class ReadFile extends AbstractTool<ReadFile.Params> {
    
    @Data
    public static class Params {
        @JsonProperty(required = true)
        @JsonPropertyDescription("è¦è¯»å–çš„æ–‡ä»¶è·¯å¾„ï¼ˆç›¸å¯¹æˆ–ç»å¯¹è·¯å¾„ï¼‰")
        private String path;
        
        @JsonPropertyDescription("èµ·å§‹è¡Œå·ï¼ˆä»1å¼€å§‹ï¼‰")
        private Integer startLine;
        
        @JsonPropertyDescription("ç»“æŸè¡Œå·")
        private Integer endLine;
    }
    
    @Override
    protected Mono<ToolResult> executeInternal(Params params) {
        return Mono.fromCallable(() -> {
            Path filePath = resolveWorkPath(params.getPath());
            
            // éªŒè¯æ–‡ä»¶å­˜åœ¨ä¸”å¯è¯»
            if (!Files.exists(filePath)) {
                return ToolResult.error("æ–‡ä»¶ä¸å­˜åœ¨: " + params.getPath());
            }
            
            // è¯»å–æ–‡ä»¶å†…å®¹
            List<String> lines = Files.readAllLines(filePath);
            
            // å¤„ç†è¡ŒèŒƒå›´
            if (params.getStartLine() != null || params.getEndLine() != null) {
                int start = params.getStartLine() != null ? params.getStartLine() - 1 : 0;
                int end = params.getEndLine() != null ? params.getEndLine() : lines.size();
                lines = lines.subList(Math.max(0, start), Math.min(lines.size(), end));
            }
            
            return ToolResult.success()
                .withOutput(String.join("\n", lines))
                .withMessage("æˆåŠŸè¯»å–æ–‡ä»¶");
        });
    }
}
```

**è®¾è®¡äº®ç‚¹**ï¼š

- **Springé›†æˆ**ï¼šå·¥å…·ä½œä¸ºSpring Beanï¼Œè‡ªåŠ¨ä¾èµ–æ³¨å…¥
- **åŸå‹ä½œç”¨åŸŸ**ï¼šæ¯æ¬¡è·å–æ–°å®ä¾‹ï¼Œé¿å…çŠ¶æ€æ±¡æŸ“
- **å®¡æ‰¹æœºåˆ¶**ï¼šæ•æ„Ÿå·¥å…·ï¼ˆå¦‚æ–‡ä»¶å†™å…¥ã€Shellæ‰§è¡Œï¼‰éœ€è¦å®¡æ‰¹
- **å“åº”å¼è®¾è®¡**ï¼šè¿”å›`Mono<ToolResult>`ï¼Œæ”¯æŒå¼‚æ­¥æ‰§è¡Œ

## ç¬¬äº”ç« ï¼šLLMé›†æˆâ€”â€”å¤šæ¨¡å‹çš„ç»Ÿä¸€æŠ½è±¡

### 5.1 LLMæŠ½è±¡å±‚è®¾è®¡

Jimiæ”¯æŒå¤šç§LLMæä¾›å•†ï¼ˆOpenAIã€Kimiã€DeepSeekã€Qwenã€Ollamaç­‰ï¼‰ï¼Œé€šè¿‡ç»Ÿä¸€çš„`ChatProvider`æ¥å£è¿›è¡ŒæŠ½è±¡ï¼š

```java
public interface ChatProvider {
    
    /**
     * æµå¼ç”ŸæˆèŠå¤©å®Œæˆ
     */
    Flux<ChatCompletionChunk> generateStream(
        String systemPrompt, 
        List<Message> messages, 
        List<Object> toolSchemas
    );
    
    /**
     * è·å–æ¨¡å‹åç§°
     */
    String getModelName();
}
```

### 5.2 LLMå·¥å‚ä¸ç¼“å­˜æœºåˆ¶

`LLMFactory`ä½¿ç”¨**Caffeineé«˜æ€§èƒ½ç¼“å­˜**æ¥ç®¡ç†LLMå®ä¾‹ï¼š

```java
@Service
public class LLMFactory {
    
    /**
     * LLMå®ä¾‹ç¼“å­˜ï¼ˆCaffeineï¼‰
     */
    private final Cache<String, LLM> llmCache;
    
    public LLMFactory(JimiConfig config, ObjectMapper objectMapper) {
        // åˆå§‹åŒ–Caffeineç¼“å­˜
        this.llmCache = Caffeine.newBuilder()
            .maximumSize(10)                           // æœ€å¤šç¼“å­˜10ä¸ªæ¨¡å‹
            .expireAfterAccess(30, TimeUnit.MINUTES)   // 30åˆ†é’Ÿæœªä½¿ç”¨åˆ™è¿‡æœŸ
            .recordStats()                             // è®°å½•ç¼“å­˜ç»Ÿè®¡
            .build();
    }
    
    /**
     * è·å–æˆ–åˆ›å»ºLLMå®ä¾‹
     */
    public LLM getOrCreateLLM(String modelName) {
        return llmCache.get(modelName, key -> createLLM(key));
    }
    
    /**
     * è§£æAPI Keyï¼ˆä¼˜å…ˆä½¿ç”¨ç¯å¢ƒå˜é‡ï¼‰
     */
    private String resolveApiKey(LLMProviderConfig providerConfig) {
        // æ„å»ºç¯å¢ƒå˜é‡åç§°ï¼š{PROVIDER_TYPE}_API_KEY
        String envVarName = providerConfig.getType().toString().toUpperCase() + "_API_KEY";
        String envApiKey = System.getenv(envVarName);
        
        return envApiKey != null ? envApiKey : providerConfig.getApiKey();
    }
}
```

**è®¾è®¡ä¼˜åŠ¿**ï¼š

- **ç¼“å­˜å¤ç”¨**ï¼šé¿å…é‡å¤åˆ›å»ºLLMå®ä¾‹ï¼Œæå‡æ€§èƒ½
- **ç¯å¢ƒå˜é‡è¦†ç›–**ï¼šæ”¯æŒé€šè¿‡ç¯å¢ƒå˜é‡é…ç½®API Keyï¼Œæå‡å®‰å…¨æ€§
- **Fail-fastéªŒè¯**ï¼šå¯åŠ¨æ—¶éªŒè¯é…ç½®ï¼Œé¿å…è¿è¡Œæ—¶é”™è¯¯

## ç¬¬å…­ç« ï¼šSkillsç³»ç»Ÿâ€”â€”é¢†åŸŸçŸ¥è¯†çš„æ™ºèƒ½æ³¨å…¥

### 6.1 Skillsç³»ç»Ÿçš„è®¾è®¡å“²å­¦

Skillsï¼ˆæŠ€èƒ½åŒ…ï¼‰è§£å†³äº†ä¸€ä¸ªå…³é”®é—®é¢˜ï¼š**å¦‚ä½•è®©AIåœ¨ç‰¹å®šé¢†åŸŸä»»åŠ¡ä¸­è¡¨ç°å¾—æ›´ä¸“ä¸šï¼Ÿ**

ä¼ ç»Ÿæ–¹æ³•æ˜¯åœ¨ç³»ç»Ÿæç¤ºè¯ä¸­ç¡¬ç¼–ç æ‰€æœ‰çŸ¥è¯†ï¼Œä½†è¿™ä¼šå¯¼è‡´ï¼š
- ğŸš« **ä¸Šä¸‹æ–‡è¿‡é•¿**ï¼šå¤§é‡æ— å…³çŸ¥è¯†å ç”¨Token
- ğŸš« **ç»´æŠ¤å›°éš¾**ï¼šä¿®æ”¹çŸ¥è¯†éœ€è¦é‡æ–°éƒ¨ç½²
- ğŸš« **ç¼ºä¹å…±äº«**ï¼šå›¢é˜Ÿé—´æ— æ³•å¤ç”¨çŸ¥è¯†

**Skillsç³»ç»Ÿçš„è§£å†³æ–¹æ¡ˆ**ï¼š

- âœ… **æŒ‰éœ€æ¿€æ´»**ï¼šæ ¹æ®ç”¨æˆ·è¾“å…¥è‡ªåŠ¨åŒ¹é…ç›¸å…³çŸ¥è¯†
- âœ… **æ¨¡å—åŒ–ç®¡ç†**ï¼šæ¯ä¸ªSkillç‹¬ç«‹é…ç½®ï¼Œæ˜“äºç»´æŠ¤
- âœ… **å›¢é˜Ÿå…±äº«**ï¼šæ”¯æŒå…¨å±€å’Œé¡¹ç›®çº§Skill
- âœ… **é«˜æ€§èƒ½**ï¼šCaffeineç¼“å­˜æå‡åŒ¹é…æ•ˆç‡

```mermaid
graph TB
    subgraph ç”¨æˆ·äº¤äº’
        UserInput[ç”¨æˆ·è¾“å…¥:<br/>'è¯·å¸®æˆ‘åšä»£ç å®¡æŸ¥']
    end
    
    subgraph Skillsæ™ºèƒ½åŒ¹é…
        Matcher[SkillMatcher<br/>å…³é”®è¯æå–å™¨]
        Registry[SkillRegistry<br/>Skillsæ³¨å†Œè¡¨]
        Cache[Caffeineç¼“å­˜]
    end
    
    subgraph Skillsåº“
        Skill1[Code Review Skill<br/>è§¦å‘è¯: code review, ä»£ç å®¡æŸ¥]
        Skill2[Unit Testing Skill<br/>è§¦å‘è¯: unit test, å•å…ƒæµ‹è¯•]
        Skill3[Performance Skill<br/>è§¦å‘è¯: performance, æ€§èƒ½ä¼˜åŒ–]
    end
    
    subgraph çŸ¥è¯†æ³¨å…¥
        Provider[SkillProvider]
        Context[ExecutionContext]
    end
    
    UserInput --> Matcher
    Matcher --> Cache
    Cache -->|æœªå‘½ä¸­| Registry
    Registry --> Skill1
    Matcher -->|åŒ¹é…æˆåŠŸ| Provider
    Provider -->|æ³¨å…¥ç³»ç»Ÿæ¶ˆæ¯| Context
    Context -->|å¢å¼ºåçš„ä¸Šä¸‹æ–‡| LLM[LLMå¤„ç†]
```

### 6.2 Skillé…ç½®æ ¼å¼

æ¯ä¸ªSkillç”±ä¸€ä¸ª`skill.yaml`æ–‡ä»¶å®šä¹‰ï¼š

```yaml
name: "Java Code Review Checklist"
description: "Javaä»£ç å®¡æŸ¥çš„å®Œæ•´æ£€æŸ¥æ¸…å•å’Œæœ€ä½³å®è·µ"
scope: global

# è§¦å‘è¯ï¼ˆç”¨äºæ™ºèƒ½åŒ¹é…ï¼‰
triggers:
  - code review
  - ä»£ç å®¡æŸ¥
  - ä»£ç è´¨é‡
  - quality check

# æŠ€èƒ½å†…å®¹ï¼ˆMarkdownæ ¼å¼ï¼‰
content: |
  ## Javaä»£ç å®¡æŸ¥æ¸…å•
  
  ### 1. ä»£ç è§„èŒƒ
  - [ ] å‘½åç¬¦åˆè§„èŒƒï¼ˆé©¼å³°ã€å¸¸é‡å¤§å†™ç­‰ï¼‰
  - [ ] ç¼©è¿›å’Œæ ¼å¼ä¸€è‡´
  - [ ] æ³¨é‡Šæ¸…æ™°ä¸”å¿…è¦
  
  ### 2. è®¾è®¡åŸåˆ™
  - [ ] éµå¾ªSOLIDåŸåˆ™
  - [ ] å•ä¸€èŒè´£åŸåˆ™
  - [ ] æ–¹æ³•é•¿åº¦åˆç†ï¼ˆå»ºè®®<50è¡Œï¼‰
  
  ### 3. å¼‚å¸¸å¤„ç†
  - [ ] å¼‚å¸¸ä¸è¢«åæ‰
  - [ ] ä½¿ç”¨åˆé€‚çš„å¼‚å¸¸ç±»å‹
  - [ ] èµ„æºæ­£ç¡®å…³é—­
```

### 6.3 æ™ºèƒ½åŒ¹é…ç®—æ³•

`SkillMatcher`å®ç°äº†åŸºäºå…³é”®è¯çš„æ™ºèƒ½åŒ¹é…ï¼š

```java
@Service
public class SkillMatcher {
    
    private Cache<String, List<SkillSpec>> matchCache;
    
    /**
     * åŒ¹é…ç”¨æˆ·è¾“å…¥ï¼Œè¿”å›ç›¸å…³çš„Skills
     */
    public List<SkillSpec> matchFromInput(List<ContentPart> userInput) {
        String inputText = extractText(userInput);
        
        // å°è¯•ä»ç¼“å­˜è·å–
        String cacheKey = String.valueOf(inputText.hashCode());
        List<SkillSpec> cachedResult = matchCache.getIfPresent(cacheKey);
        if (cachedResult != null) {
            return cachedResult;
        }
        
        // æ‰§è¡Œå®é™…åŒ¹é…
        List<SkillSpec> matchedSkills = performMatch(inputText);
        
        // ç¼“å­˜ç»“æœ
        matchCache.put(cacheKey, matchedSkills);
        return matchedSkills;
    }
    
    /**
     * æ‰§è¡ŒåŒ¹é…é€»è¾‘
     */
    private List<SkillSpec> performMatch(String inputText) {
        // 1. æå–å…³é”®è¯
        Set<String> keywords = extractKeywords(inputText);
        
        // 2. ä»æ³¨å†Œè¡¨ä¸­æŸ¥æ‰¾å€™é€‰Skills
        List<SkillSpec> candidateSkills = skillRegistry.findByTriggers(keywords);
        
        // 3. è®¡ç®—åŒ¹é…å¾—åˆ†å¹¶æ’åº
        return candidateSkills.stream()
            .map(skill -> new ScoredSkill(skill, calculateScore(skill, keywords, inputText)))
            .filter(scored -> scored.score >= scoreThreshold)
            .sorted(Comparator.comparingInt(ScoredSkill::getScore).reversed())
            .limit(maxSkills)
            .map(ScoredSkill::getSkill)
            .collect(Collectors.toList());
    }
    
    /**
     * è®¡ç®—åŒ¹é…å¾—åˆ†
     * 
     * è®¡åˆ†ç­–ç•¥ï¼š
     * - è§¦å‘è¯ç²¾ç¡®åŒ¹é…ï¼š+50åˆ†
     * - è§¦å‘è¯éƒ¨åˆ†åŒ¹é…ï¼š+30åˆ†
     * - åç§°åŒ¹é…ï¼š+40åˆ†
     * - å…³é”®è¯åœ¨æè¿°ä¸­å‡ºç°ï¼š+10åˆ†
     */
    private int calculateScore(SkillSpec skill, Set<String> keywords, String fullText) {
        int score = 0;
        
        // æ£€æŸ¥è§¦å‘è¯åŒ¹é…
        for (String trigger : skill.getTriggers()) {
            if (keywords.contains(trigger.toLowerCase()) || 
                fullText.toLowerCase().contains(trigger.toLowerCase())) {
                score += 50;
            }
        }
        
        return Math.min(score, 100);
    }
}
```

### 6.4 çŸ¥è¯†æ³¨å…¥æµç¨‹

`SkillProvider`è´Ÿè´£å°†åŒ¹é…çš„Skillsæ³¨å…¥åˆ°ä¸Šä¸‹æ–‡ï¼š

```java
@Service
public class SkillProvider {
    
    /**
     * æ³¨å…¥Skillsåˆ°ä¸Šä¸‹æ–‡
     */
    public Mono<Void> injectSkills(Context context, List<SkillSpec> skills) {
        // è¿‡æ»¤å·²æ¿€æ´»çš„Skills
        List<SkillSpec> newSkills = skills.stream()
            .filter(skill -> !context.getActiveSkills().contains(skill))
            .collect(Collectors.toList());
        
        if (newSkills.isEmpty()) {
            return Mono.empty();
        }
        
        // æ ¼å¼åŒ–Skillsä¸ºç³»ç»Ÿæ¶ˆæ¯
        String skillsContent = formatSkills(newSkills);
        Message skillsMessage = Message.system(skillsContent);
        
        // æ·»åŠ åˆ°ä¸Šä¸‹æ–‡å¹¶è®°å½•æ¿€æ´»çš„Skills
        return context.appendMessage(skillsMessage)
            .then(context.addActiveSkills(newSkills));
    }
    
    /**
     * æ ¼å¼åŒ–Skillsä¸ºMarkdownæ–‡æœ¬
     */
    private String formatSkills(List<SkillSpec> skills) {
        StringBuilder sb = new StringBuilder();
        sb.append("<system type=\"skills\">\n\n");
        sb.append("ä»¥ä¸‹æŠ€èƒ½åŒ…å·²æ ¹æ®å½“å‰ä»»åŠ¡è‡ªåŠ¨æ¿€æ´»ï¼Œè¯·åœ¨æ‰§è¡Œä»»åŠ¡æ—¶éµå¾ªè¿™äº›ä¸“ä¸šæŒ‡å—ï¼š\n\n");
        
        for (int i = 0; i < skills.size(); i++) {
            SkillSpec skill = skills.get(i);
            sb.append("### ").append(i + 1).append(". ").append(skill.getName()).append("\n\n");
            sb.append(skill.getContent()).append("\n\n");
            if (i < skills.size() - 1) {
                sb.append("---\n\n");
            }
        }
        
        sb.append("</system>");
        return sb.toString();
    }
}
```

**Skillsç³»ç»Ÿçš„ä¼˜åŠ¿**ï¼š

- **æ™ºèƒ½æ¿€æ´»**ï¼šæ— éœ€æ‰‹åŠ¨é€‰æ‹©ï¼Œç³»ç»Ÿè‡ªåŠ¨åŒ¹é…æœ€ç›¸å…³çš„çŸ¥è¯†
- **ä¸Šä¸‹æ–‡ä¼˜åŒ–**ï¼šåªæ³¨å…¥å¿…è¦çš„çŸ¥è¯†ï¼ŒèŠ‚çœToken
- **å›¢é˜Ÿåä½œ**ï¼šæ”¯æŒå…±äº«Skillsåº“ï¼Œå›¢é˜Ÿç»éªŒæ²‰æ·€
- **æŒç»­æ”¹è¿›**ï¼šå¯éšæ—¶æ›´æ–°Skillså†…å®¹ï¼Œæ— éœ€ä¿®æ”¹ä»£ç 

## ç¬¬ä¸ƒç« ï¼šMCPåè®®é›†æˆâ€”â€”è¿æ¥å¤–éƒ¨ä¸–ç•Œ

### 7.1 MCPåè®®ç®€ä»‹

MCPï¼ˆModel Context Protocolï¼‰æ˜¯ä¸€ä¸ªæ ‡å‡†åŒ–çš„AIå·¥å…·è°ƒç”¨åè®®ï¼Œå…è®¸AIæ¨¡å‹ä¸å¤–éƒ¨æœåŠ¡è¿›è¡Œç»“æ„åŒ–é€šä¿¡ã€‚Jimié€šè¿‡MCPé›†æˆï¼Œå¯ä»¥ï¼š

- ğŸ—„ï¸ **è®¿é—®æ•°æ®åº“**ï¼šæ‰§è¡ŒSQLæŸ¥è¯¢ã€æ•°æ®åˆ†æ
- ğŸ“ **æ“ä½œæ–‡ä»¶ç³»ç»Ÿ**ï¼šè·¨å¹³å°æ–‡ä»¶ç®¡ç†
- ğŸ”— **è°ƒç”¨GitæœåŠ¡**ï¼šæŸ¥çœ‹æäº¤å†å²ã€åˆ†æ”¯ç®¡ç†
- ğŸŒ **é›†æˆGitHub**ï¼šåˆ›å»ºIssueã€ç®¡ç†PR

### 7.2 MCPå®¢æˆ·ç«¯æ¶æ„

```mermaid
graph TB
    subgraph MCPå·¥å…·
        MCPTool[MCPå·¥å…·æä¾›è€…]
    end
    
    subgraph å®¢æˆ·ç«¯æ¥å£
        JsonRpcClient[JsonRpcClientæ¥å£]
    end
    
    subgraph HTTPå®ç°
        HttpClient[HttpJsonRpcClient]
        WebClient[Spring WebClient]
    end
    
    subgraph StdIOå®ç°
        StdioClient[StdIoJsonRpcClient]
        ProcessBuilder[Java ProcessBuilder]
    end
    
    MCPTool --> JsonRpcClient
    JsonRpcClient --> HttpClient
    JsonRpcClient --> StdioClient
    HttpClient --> WebClient
    StdioClient --> ProcessBuilder
```

### 7.3 MCPå®¢æˆ·ç«¯æ¥å£

```java
/**
 * JSON-RPCå®¢æˆ·ç«¯æ¥å£
 */
public interface JsonRpcClient extends AutoCloseable {
    
    /**
     * åˆå§‹åŒ–è¿æ¥
     */
    MCPSchema.InitializeResult initialize() throws Exception;
    
    /**
     * è·å–å·¥å…·åˆ—è¡¨
     */
    MCPSchema.ListToolsResult listTools() throws Exception;
    
    /**
     * è°ƒç”¨å·¥å…·
     */
    MCPSchema.CallToolResult callTool(String toolName, Map<String, Object> arguments) 
        throws Exception;
}
```

**HTTPå®ç°ç¤ºä¾‹**ï¼š

```java
public class HttpJsonRpcClient implements JsonRpcClient {
    
    private final WebClient webClient;
    
    @Override
    public MCPSchema.CallToolResult callTool(String toolName, Map<String, Object> arguments) 
            throws Exception {
        JsonRpcRequest request = JsonRpcRequest.builder()
            .method("tools/call")
            .params(Map.of(
                "name", toolName,
                "arguments", arguments
            ))
            .build();
        
        return sendRequest(request, MCPSchema.CallToolResult.class);
    }
}
```

### 7.4 MCPé…ç½®ç¤ºä¾‹

```json
{
  "name": "database-server",
  "description": "PostgreSQLæ•°æ®åº“æŸ¥è¯¢æœåŠ¡",
  "type": "http",
  "config": {
    "url": "http://localhost:8080/mcp",
    "headers": {
      "Authorization": "Bearer ${DB_API_KEY}"
    }
  }
}
```

## ç¬¬å…«ç« ï¼šæ¶ˆæ¯æ€»çº¿Wireâ€”â€”ç»„ä»¶è§£è€¦çš„åˆ©å™¨

### 8.1 Wireçš„è®¾è®¡ç†å¿µ

Wireæ¶ˆæ¯æ€»çº¿é€šè¿‡**å‘å¸ƒ-è®¢é˜…æ¨¡å¼**å®ç°ç»„ä»¶è§£è€¦ï¼š

```mermaid
graph LR
    subgraph å‘å¸ƒè€…
        Engine[JimiEngine]
        Executor[AgentExecutor]
        Tools[å·¥å…·ç³»ç»Ÿ]
    end
    
    subgraph æ¶ˆæ¯æ€»çº¿
        Wire[Wireæ¶ˆæ¯æ€»çº¿]
    end
    
    subgraph è®¢é˜…è€…
        ShellUI[Shell UI]
        Logger[æ—¥å¿—ç³»ç»Ÿ]
        SessionMgr[ä¼šè¯ç®¡ç†å™¨]
    end
    
    Engine -->|å‘é€äº‹ä»¶| Wire
    Executor -->|å‘é€äº‹ä»¶| Wire
    Tools -->|å‘é€äº‹ä»¶| Wire
    Wire -.->|æ¨é€æ¶ˆæ¯| ShellUI
    Wire -.->|æ¨é€æ¶ˆæ¯| Logger
    Wire -.->|æ¨é€æ¶ˆæ¯| SessionMgr
```

### 8.2 Wireæ¥å£ä¸å®ç°

```java
/**
 * Wireæ¶ˆæ¯æ€»çº¿æ¥å£
 */
public interface Wire {
    void send(WireMessage message);
    Flux<WireMessage> asFlux();
    void complete();
}

/**
 * Wireå®ç°ï¼ˆåŸºäºReactorçš„Sinksï¼‰
 */
public class WireImpl implements Wire {
    
    private final Sinks.Many<WireMessage> sink;
    
    public WireImpl() {
        // ä½¿ç”¨Multicastæ”¯æŒå¤šè®¢é˜…è€…
        this.sink = Sinks.many().multicast().onBackpressureBuffer();
    }
    
    @Override
    public void send(WireMessage message) {
        sink.tryEmitNext(message);
    }
    
    @Override
    public Flux<WireMessage> asFlux() {
        return sink.asFlux();
    }
}
```

### 8.3 æ¶ˆæ¯ç±»å‹ä½“ç³»

```java
// æ­¥éª¤å¼€å§‹æ¶ˆæ¯
public class StepBegin implements WireMessage {
    private int stepNumber;
    private boolean isSubagent;
    private String agentName;
}

// å†…å®¹éƒ¨åˆ†æ¶ˆæ¯ï¼ˆLLMæµå¼è¾“å‡ºï¼‰
public class ContentPartMessage implements WireMessage {
    private ContentPart contentPart;
}

// å·¥å…·è°ƒç”¨æ¶ˆæ¯
public class ToolCallMessage implements WireMessage {
    private ToolCall toolCall;
}

// Skillsæ¿€æ´»æ¶ˆæ¯
public class SkillsActivated implements WireMessage {
    private List<String> skillNames;
    private int count;
}
```

### 8.4 UIå±‚çš„æ¶ˆæ¯å¤„ç†

```java
public class ShellUI {
    
    private void subscribeWire() {
        wireSubscription = wire.asFlux()
            .subscribe(this::handleWireMessage);
    }
    
    private void handleWireMessage(WireMessage message) {
        if (message instanceof StepBegin stepBegin) {
            printStatus("ğŸ¤” Step " + stepBegin.getStepNumber() + " - Thinking...");
            
        } else if (message instanceof ContentPartMessage contentMsg) {
            // å®æ—¶æ‰“å°LLMè¾“å‡º
            printAssistantText(contentMsg.getContentPart().getText());
            
        } else if (message instanceof ToolCallMessage toolCallMsg) {
            // æ˜¾ç¤ºå·¥å…·è°ƒç”¨
            toolVisualization.onToolCallStart(toolCallMsg.getToolCall());
            
        } else if (message instanceof SkillsActivated skillsMsg) {
            printInfo("ğŸ’¡ æ¿€æ´»Skills: " + String.join(", ", skillsMsg.getSkillNames()));
        }
    }
}
```

## ç¬¬ä¹ç« ï¼šä½¿ç”¨ç¤ºä¾‹ä¸æœ€ä½³å®è·µ

### 9.1 åŸºæœ¬ä½¿ç”¨æµç¨‹

```bash
# 1. å¯åŠ¨Jimi
./scripts/start.sh

# 2. æŸ¥çœ‹å¸®åŠ©
/help

# 3. å¼€å§‹å¯¹è¯
è¯·å¸®æˆ‘åˆ†æsrc/main/javaç›®å½•ä¸‹çš„ä»£ç ç»“æ„

# 4. ä½¿ç”¨ä¸“ä¸šAgent
/agent code
è¯·å¸®æˆ‘å®ç°ä¸€ä¸ªç”¨æˆ·æ³¨å†ŒåŠŸèƒ½
```

### 9.2 é«˜çº§ä½¿ç”¨æŠ€å·§

**1. é…ç½®SkillsåŠŸèƒ½**

ç¼–è¾‘`application.yml`ï¼š

```yaml
jimi:
  skill:
    enabled: true
    auto-match: true
    matching:
      score-threshold: 30
      max-matched-skills: 5
```

**2. ä½¿ç”¨YOLOæ¨¡å¼ï¼ˆè‡ªåŠ¨æ‰¹å‡†ï¼‰**

```bash
./scripts/start.sh --yolo
```

**3. æŒ‡å®šå·¥ä½œç›®å½•**

```bash
./scripts/start.sh --work-dir /path/to/your/project
```

**4. ä¼šè¯æ¢å¤**

```bash
# æ¢å¤ä¸Šæ¬¡ä¼šè¯
./scripts/start.sh --resume

# ä½¿ç”¨æŒ‡å®šä¼šè¯
./scripts/start.sh --session my-project
```

### 9.3 å¼€å‘è‡ªå®šä¹‰Agent

åˆ›å»º`agents/my-agent/agent.yaml`ï¼š

```yaml
name: "My Custom Agent"
description: "æˆ‘çš„ä¸“å±Agent"
subagents:
  - code
  - review
tools:
  - read_file
  - write_to_file
  - bash
system_prompt_args:
  MY_CUSTOM_PARAM: "è‡ªå®šä¹‰å‚æ•°å€¼"
```

åˆ›å»º`agents/my-agent/system_prompt.md`ï¼š

```markdown
ä½ æ˜¯ä¸€ä½ä¸“ä¸šçš„${MY_CUSTOM_PARAM}åŠ©æ‰‹ã€‚
å½“å‰å·¥ä½œç›®å½•ï¼š${JIMI_WORK_DIR}
...
```

å¯åŠ¨æ—¶ä½¿ç”¨ï¼š

```bash
./scripts/start.sh --agent my-agent
```

### 9.4 å¼€å‘è‡ªå®šä¹‰å·¥å…·

```java
@Component
@Scope("prototype")
public class MyCustomTool extends AbstractTool<MyCustomTool.Params> {
    
    @Data
    public static class Params {
        @JsonProperty(required = true)
        @JsonPropertyDescription("å‚æ•°æè¿°")
        private String param1;
    }
    
    @Override
    public String getName() {
        return "my_custom_tool";
    }
    
    @Override
    public String getDescription() {
        return "æˆ‘çš„è‡ªå®šä¹‰å·¥å…·";
    }
    
    @Override
    protected Mono<ToolResult> executeInternal(Params params) {
        return Mono.fromCallable(() -> {
            // å·¥å…·é€»è¾‘å®ç°
            return ToolResult.success()
                .withOutput("æ‰§è¡Œç»“æœ")
                .withMessage("æ‰§è¡ŒæˆåŠŸ");
        });
    }
}
```

åœ¨`ToolRegistryFactory`ä¸­æ³¨å†Œï¼š

```java
public ToolRegistry createStandardRegistry(...) {
    // ... existing code
    registry.register(createMyCustomTool());
    return registry;
}
```

## ç¬¬åç« ï¼šæŠ€æœ¯æ¶æ„æ€»ç»“ä¸å±•æœ›

### 10.1 æ ¸å¿ƒè®¾è®¡æ¨¡å¼æ€»ç»“

| è®¾è®¡æ¨¡å¼ | åº”ç”¨ä½ç½® | ä¼˜åŠ¿ |
|---------|---------|------|
| **å§”æ‰˜æ¨¡å¼** | JimiEngine â†’ AgentExecutor | èŒè´£åˆ†ç¦»ï¼Œæ˜“äºæµ‹è¯• |
| **å·¥å‚æ¨¡å¼** | LLMFactory, ToolRegistryFactory | å¯¹è±¡åˆ›å»ºä¸ä½¿ç”¨è§£è€¦ |
| **ç­–ç•¥æ¨¡å¼** | ChatProviderå¤šå®ç° | æ”¯æŒå¤šç§LLMæä¾›å•† |
| **æ³¨å†Œè¡¨æ¨¡å¼** | ToolRegistry, AgentRegistry | åŠ¨æ€æ³¨å†Œå’ŒæŸ¥æ‰¾ |
| **è§‚å¯Ÿè€…æ¨¡å¼** | Wireæ¶ˆæ¯æ€»çº¿ | ç»„ä»¶è§£è€¦é€šä¿¡ |
| **æ¨¡æ¿æ–¹æ³•** | AbstractTool | å¤ç”¨å…¬å…±é€»è¾‘ |
| **åŸå‹æ¨¡å¼** | Spring Prototype Bean | é¿å…çŠ¶æ€æ±¡æŸ“ |

### 10.2 æŠ€æœ¯æ ˆäº®ç‚¹

- **Spring Boot 3.2.5**ï¼šç°ä»£ä¼ä¸šçº§æ¡†æ¶ï¼Œä¾èµ–æ³¨å…¥ï¼Œé…ç½®ç®¡ç†
- **Project Reactor**ï¼šå“åº”å¼ç¼–ç¨‹ï¼Œå¼‚æ­¥éé˜»å¡ï¼Œæµå¼å¤„ç†
- **Caffeine**ï¼šé«˜æ€§èƒ½ç¼“å­˜ï¼ŒLRUæ·˜æ±°ï¼Œç»Ÿè®¡åŠŸèƒ½
- **JLine 3**ï¼šå¼ºå¤§çš„ç»ˆç«¯äº¤äº’åº“ï¼Œè‡ªåŠ¨è¡¥å…¨ï¼Œè¯­æ³•é«˜äº®
- **Jackson**ï¼šJSONåºåˆ—åŒ–/ååºåˆ—åŒ–ï¼Œæ”¯æŒæ³¨è§£
- **Apache Commons Text**ï¼šå­—ç¬¦ä¸²æ›¿æ¢ï¼Œæ¨¡æ¿æ¸²æŸ“

### 10.3 æ€§èƒ½ä¼˜åŒ–ç­–ç•¥

1. **å¤šå±‚ç¼“å­˜**ï¼š
   - LLMå®ä¾‹ç¼“å­˜ï¼ˆCaffeineï¼‰
   - SkillsåŒ¹é…ç»“æœç¼“å­˜
   - Agentè§„èŒƒç¼“å­˜

2. **å¹¶å‘æ‰§è¡Œ**ï¼š
   - å¤šä¸ªå·¥å…·è°ƒç”¨å¹¶å‘æ‰§è¡Œï¼ˆFlux.mergeï¼‰
   - æµå¼å“åº”å®æ—¶æ¨é€

3. **ä¸Šä¸‹æ–‡å‹ç¼©**ï¼š
   - è‡ªåŠ¨æ£€æµ‹Tokenè¶…é™
   - æ™ºèƒ½å‹ç¼©å†å²æ¶ˆæ¯

4. **èµ„æºç®¡ç†**ï¼š
   - Spring Beanä½œç”¨åŸŸæ§åˆ¶
   - AutoCloseableèµ„æºè‡ªåŠ¨é‡Šæ”¾

### 10.4 æœªæ¥å‘å±•æ–¹å‘

#### çŸ­æœŸè®¡åˆ’

- ğŸ”¥ **å¢å¼ºSkillsç³»ç»Ÿ**ï¼š
  - æ”¯æŒæ¨¡æ¿å˜é‡å’ŒåŠ¨æ€å†…å®¹ç”Ÿæˆ
  - å®ç°åŸºäºä¸Šä¸‹æ–‡çš„åŠ¨æ€SkillsåŒ¹é…
  - æ”¯æŒSkillsé—´çš„ä¾èµ–å…³ç³»

- ğŸš€ **æ‰©å±•å·¥å…·ç”Ÿæ€**ï¼š
  - é›†æˆæ›´å¤šMCPæœåŠ¡ï¼ˆGitHub, Jira, Slackç­‰ï¼‰
  - å¼€å‘ä»£ç åˆ†æå·¥å…·ï¼ˆASTè§£æã€ä¾èµ–åˆ†æï¼‰
  - æ”¯æŒæ•°æ®åº“Schemaåˆ†æ

- ğŸ’¡ **ä¼˜åŒ–ç”¨æˆ·ä½“éªŒ**ï¼š
  - Web UIç•Œé¢ï¼ˆå¯é€‰ï¼‰
  - IDEæ’ä»¶ï¼ˆIntelliJ IDEA, VS Codeï¼‰
  - æ›´ä¸°å¯Œçš„å¯è§†åŒ–è¾“å‡º

#### ä¸­æœŸè®¡åˆ’

- ğŸ§  **æ™ºèƒ½åŒ–å¢å¼º**ï¼š
  - å¼•å…¥RAGï¼ˆæ£€ç´¢å¢å¼ºç”Ÿæˆï¼‰
  - æ”¯æŒé¡¹ç›®çŸ¥è¯†åº“è‡ªåŠ¨æ„å»º
  - ä¸Šä¸‹æ–‡æ™ºèƒ½æ‘˜è¦

- ğŸŒ **åˆ†å¸ƒå¼æ”¯æŒ**ï¼š
  - å¤šAgentå¹¶è¡Œåä½œ
  - åˆ†å¸ƒå¼å·¥å…·æ‰§è¡Œ
  - äº‘ç«¯LLMæœåŠ¡é›†æˆ

- ğŸ“Š **å¯è§‚æµ‹æ€§**ï¼š
  - æ€§èƒ½ç›‘æ§å’ŒæŒ‡æ ‡é‡‡é›†
  - æ‰§è¡Œè¿‡ç¨‹å¯è§†åŒ–
  - æˆæœ¬åˆ†æå’Œä¼˜åŒ–å»ºè®®

#### é•¿æœŸæ„¿æ™¯

- ğŸ¯ **ä¼ä¸šçº§å¢å¼º**ï¼š
  - å¤šç§Ÿæˆ·æ”¯æŒ
  - æƒé™å’Œå®¡è®¡ç³»ç»Ÿ
  - ä¼ä¸šçŸ¥è¯†åº“é›†æˆ

- ğŸ” **å®‰å…¨æ€§å¼ºåŒ–**ï¼š
  - ä»£ç å®‰å…¨æ‰«æ
  - æ•æ„Ÿä¿¡æ¯æ£€æµ‹
  - åˆè§„æ€§æ£€æŸ¥

- ğŸŒŸ **ç”Ÿæ€å»ºè®¾**ï¼š
  - æ’ä»¶å¸‚åœº
  - Skillså…±äº«å¹³å°
  - ç¤¾åŒºè´¡çŒ®æœºåˆ¶

## ç»“è¯­ï¼šå¼€æºçš„åŠ›é‡ï¼ŒJavaçš„æœªæ¥

Jimié¡¹ç›®ä¸ä»…ä»…æ˜¯ä¸€ä¸ªAIä»£ç†å·¥å…·ï¼Œæ›´æ˜¯ä¸€æ¬¡å¯¹"ç”¨JavaåšAI"çš„æ·±åº¦æ¢ç´¢ã€‚é€šè¿‡è¿™ä¸ªé¡¹ç›®ï¼Œæˆ‘ä»¬è¯æ˜äº†ï¼š

- âœ… **Javaå®Œå…¨å¯ä»¥èƒœä»»AIåº”ç”¨å¼€å‘**ï¼šå“åº”å¼ç¼–ç¨‹ã€æµå¼å¤„ç†ã€é«˜æ€§èƒ½ç¼“å­˜ï¼Œä¸€åº”ä¿±å…¨
- âœ… **ä¼ä¸šçº§è®¾è®¡å¯ä»¥ä¸AIå®Œç¾ç»“åˆ**ï¼šSpring Bootçš„ä¾èµ–æ³¨å…¥ã€é…ç½®ç®¡ç†ã€æµ‹è¯•æ¡†æ¶ï¼Œä¸ºAIåº”ç”¨æä¾›åšå®åŸºç¡€
- âœ… **æ¨¡å—åŒ–æ¶æ„è®©AIç³»ç»Ÿæ›´æ˜“ç»´æŠ¤**ï¼šæ¸…æ™°çš„èŒè´£è¾¹ç•Œã€å¯æ’æ‹”çš„ç»„ä»¶è®¾è®¡ï¼Œé™ä½äº†å¤æ‚åº¦
- âœ… **å¼€æºç¤¾åŒºçš„åŠ›é‡æ— ç©·**ï¼šé€šè¿‡åˆ†äº«ä»£ç ã€æ–‡æ¡£å’Œç»éªŒï¼Œè®©æ›´å¤šå¼€å‘è€…å—ç›Š

### ç»™Javaå¼€å‘è€…çš„å»ºè®®

å¦‚æœä½ ä¹Ÿå¯¹AIæ„Ÿå…´è¶£ï¼Œä¸å¦¨ä»Jimiå¼€å§‹ï¼š

1. **Cloneä»£ç ï¼Œæ·±å…¥é˜…è¯»**ï¼šæ¯ä¸ªæ¨¡å—éƒ½æœ‰è¯¦ç»†çš„æ³¨é‡Š
2. **è¿è¡Œæµ‹è¯•ï¼Œç†è§£æµç¨‹**ï¼šå•å…ƒæµ‹è¯•è¦†ç›–æ ¸å¿ƒé€»è¾‘
3. **å°è¯•æ‰©å±•ï¼Œå®è·µå­¦ä¹ **ï¼šè‡ªå®šä¹‰Agentã€å·¥å…·ã€Skills
4. **å‚ä¸è´¡çŒ®ï¼Œå…±åŒæˆé•¿**ï¼šæäº¤PRï¼Œåˆ†äº«ç»éªŒ

### é¡¹ç›®ä¿¡æ¯

- **GitHubä»“åº“**ï¼š[https://github.com/your-repo/jimi](https://github.com/your-repo/jimi)
- **æ–‡æ¡£ä¸­å¿ƒ**ï¼šé¡¹ç›®æ ¹ç›®å½•`.qoder/repowiki/`
- **æŠ€æœ¯è®¨è®º**ï¼šGitHub Discussions
- **é—®é¢˜åé¦ˆ**ï¼šGitHub Issues

### è‡´è°¢

æ„Ÿè°¢ä»¥ä¸‹å¼€æºé¡¹ç›®ä¸ºJimiæä¾›çš„çµæ„Ÿå’Œæ”¯æŒï¼š

- [Spring Boot](https://spring.io/projects/spring-boot) - ä¼ä¸šçº§åº”ç”¨æ¡†æ¶
- [Project Reactor](https://projectreactor.io/) - å“åº”å¼ç¼–ç¨‹åº“
- [Caffeine](https://github.com/ben-manes/caffeine) - é«˜æ€§èƒ½ç¼“å­˜
- [JLine](https://github.com/jline/jline3) - ç»ˆç«¯äº¤äº’åº“
- [Model Context Protocol](https://modelcontextprotocol.io/) - AIå·¥å…·æ ‡å‡†åè®®

---

**è®©æˆ‘ä»¬ä¸€èµ·ï¼Œç”¨Javaæ‰“é€ å±äºJavaå¼€å‘è€…çš„AIæœªæ¥ï¼** ğŸš€
---

*å…³äºä½œè€…ï¼šå±±æ³½ï¼ŒAIæŠ€æœ¯çˆ±å¥½è€…ï¼ŒJimié¡¹ç›®å‘èµ·äººã€‚è‡´åŠ›äºæ¨åŠ¨Javaåœ¨AIé¢†åŸŸçš„å‘å±•ï¼Œè®©æ›´å¤šJavaå¼€å‘è€…èƒ½å¤Ÿè½»æ¾è¸å…¥AIçš„ä¸–ç•Œã€‚*

*å¦‚æœæ‚¨å¯¹Jimié¡¹ç›®æ„Ÿå…´è¶£ï¼Œæ¬¢è¿è®¿é—®GitHubä»“åº“ï¼Œå‚ä¸å¼€æºè´¡çŒ®ï¼Œå…±åŒå»ºè®¾Java AIç”Ÿæ€ï¼*
> å¦‚æœè§‰å¾—è¿™ç¯‡æ–‡ç« å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç»™Jimié¡¹ç›®ä¸€ä¸ªâ­Starï¼Œè®©æ›´å¤šJavaå¼€å‘è€…çœ‹åˆ°ï¼
